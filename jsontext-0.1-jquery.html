<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Json</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script src="jsonlint.js"></script>
    <script src="json-uncollapse-0.1.js"></script>

    <script type="text/javascript">
            var json = {
                "TableFiles": "Document",
                "FilePathColumn": "PathGuid",
                "FileNameColumn": "DocumentName",
                "LocalTables": [
                    "ClientSource",
                    "OrderStageDict",
                    "OrderPaymentStatusDict",
                    "TaskStatus",
                    "Priority",
                    "PayerGroupType",
                    "OffshoreCompanyStatus",
                    "IdentityDocumentType",
                    "IdentityDocumentValid",
                    "EventType",
                    "CashFlowType",
                    "CashAccountType",
                    "InquiryType"
                ],
                "Constants": {"zbid":"94A95961-DC3D-407A-AF56-16F36D893BBF","edstuff":"01D68C5F-B4F9-4394-AAA8-35D4C9C8D36A","ava":"18f25c58-9f6a-4af5-9e11-715ee576d942"},
                "Defaults": {"PageUrl":"/crm/tasks","Menus":{"1":["mainmenu"]},"Theme":"Lawfirm"},
                "Search": [
                    "OffshoreCompany",
                    "PayerGroup",
                    "Project"
                ],
                "Tables": [
                    {"Name":"PayerGroup","ExcludedInUpsert":["CryptoKey","CryptoV"]},
                    {"Name":"OrderDetail","ExcludedInUpsert":["Amount"]},
                    {"Name":"CashAccount","ColumnAutocomplete":{"BankID":{"Size":0}}},
                    {"Name":"CashFlow","ColumnAutocomplete":{"TargetAccountID":{"Size":0},"CashAccountID":{"Size":0}},"Formats":{"PaymentDate":"d"},"CustomColumns":[{"Name":"DT","DataType":"money","Sql":"case when isIncome = 1 then [Sum]  else null end"},{"Name":"KT","DataType":"money","Sql":"case when isIncome = 0 then [Sum]  else null end"}]},
                    {"Name":"Bills","Formats":{"BillingDate":"d"},"DisplayColumn":"BillName"},
                    {"Name":"News","Formats":{"NewsDate":"g"}},
                    {"Name":"Order","Formats":{"OrderDate":"d"}},
                    {"Name":"Project","Formats":{"RegisterDate":"d"}},
                    {"Name":"Events","Formats":{"BeginDate":"d"}},
                    {"Name":"Document","Formats":{"FileSize":"bytes"}},
                    {"Name":"OffshoreCompany","ColumnAutocomplete":{"OffshoreCompanyStatusID":{"Size":0}}},
                    {"Name":"City","SelectCount":1},
                    {"Name":"Staff","DisplayColumn":"StaffID - ContactPerson.ShortName"},
                    {"Name":"Client","DisplayColumn":"PayerGroupID - PayerGroup.PayerGroupName"},
                    {"Name":"Language","DisplayColumn":"LanguageName"},
                    {"Name":"CPDetailsType","SelectCount":0},
                    {"Name":"NewsMaker","SelectCount":0},
                    {"Name":"ClientSource","SelectCount":0},
                    {"Name":"CashAccount","SelectCount":0},
                    {"Name":"CashFlowType","SelectCount":0},
                    {"Name":"CashAccount","SelectCount":0},
                    {"Name":"SolutionToProduct","DisplayColumn":"ProductID - Product.ProductName"},
                    {"Name":"Task","Formats":{"Duration":"minutes"},"CustomColumns":[{"Name":"Duration","DataType":"int","Sql":"(select sum(datediff(s, StartTime, isnull(FinishTime, GetUtcDate()))) from TimeTracker t where t.TaskID = [Task].TaskID)"}]},
                    {"Name":"TimeTracker","Formats":{"Duration":"minutes"},"CustomColumns":[{"Name":"Duration","DataType":"int","Sql":"datediff(s, StartTime, isnull(FinishTime, GetUtcDate()))"}]}
                ],
                "Pages": [
                    {"__Client__":"","Url":"/crm/newclient","Id":"contactClientCreate","Upserts":[{"TableMain":"PayerGroup","AjaxOnly":false,"Title":"Новый клиент","ToMain":["Client"],"ActionItems":[{"ActionParams":{"Method":"PayerGroupCrypto"}}],"ServerData":{"PayerGroupTypeID":"4"},"FkFilter":{"Client.ClientSourceID":"SegmentID=1"},"Redirect":{"PageId":"clientProfiles","Args":["%pk%"]},"Defaults":{"PayerGroup.ClientSectorID":"","PayerGroup.CityID":"2","Client.SegmentID":"1","Client.ClientManagerID":"%user%","Client.DiscountProgramID":""},"Hidden":["Client.SegmentID"],"Exclude":["PayerGroupTypeID","IsCurrent","DiscountRate"]}]},
                    {"Url":"/crm/clients/lf","Id":"clientsLF","Grids":[{"Table":"Client","Join":{"PayerGroupID":["ClientSectorID","CityID"]},"HFilter":"SegmentID=1","ExcludedColumns":["SegmentID","DiscountProgramID","DiscountRate"],"ActionZone":[{"Group":"","GroupIcon":"icon-th","Text":"Добавить клиента","IconCss":"icon-plus-sign","Controls":{"clientProfiles_upsert_6":{"ColVal":{"SegmentID":"1"}}}},{"Group":"","ToExcel":true}],"Filters":{"Columns":{"Город":"PayerGroupID - PayerGroup.CityID","Название":"like:PayerGroupID - PayerGroup.PayerGroupName"}},"PagingSize":30,"IsSortOn":true,"Actions":[{"Text":"Данные клиента","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Return":"clientsLF_upsert_0"}],"SortBy":"PayerGroupID","Navigates":[{"PageId":"clientProfiles","Arg":"PayerGroupID","Column":"PayerGroupID","NavByColumn":true}]}],"Upserts":[{"TableMain":"Client","Title":"Данные клиента","FromMain":["PayerGroup"],"FkFilter":{"ClientSourceID":"SegmentID=1"},"ActionItems":[{"ActionParams":{"Method":"PayerGroupCrypto"}}],"Hidden":["SegmentID","PayerGroup.PayerGroupTypeID"],"Defaults":{"PayerGroup.PayerGroupTypeID":"4"},"Exclude":["IsCurrent","DiscountRate"]}]},
                    {"Url":"/crm/counterparts","Id":"counterparts","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Контрагенты</h3>"}}},"Tabs":[{"Title":"Банки","Items":["counterparts_grid_0"]},{"Title":"Провайдеры","Items":["counterparts_grid_1"]}],"Grids":[{"Table":"Bank","ExcludedColumns":["CryptoKey","CryptoV","IsCurrent","Commentary"],"PagingSize":30,"Columns":{"Orders":{"PayerGroupName":1}},"IsSortOn":true,"Join":{"BankID":"PayerGroupName"},"SortBy":"BankID - PayerGroupName","ActionZone":[{"Group":"","GroupIcon":"icon-th","Text":"Добавить банк","IconCss":"icon-plus-sign","Controls":{"counterparts_upsert_1":{"ColVal":{"PayerGroup.PayerGroupTypeID":"8","PayerGroup.ClientSectorID":"7"}}}},{"Group":"","ToExcel":true}],"Actions":[{"Text":"Данные банка","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Return":"counterparts_upsert_1"}],"Filters":{"Columns":{"Город":"CityID","Название":"like:PayerGroupName"}},"Navigates":[{"PageId":"clientProfiles","Arg":"PayerGroupID","Column":"PayerGroupName"}]},{"Table":"PayerGroup","ExcludedColumns":["CryptoKey","CryptoV","IsCurrent","Commentary"],"ActionZone":[{"ToExcel":true}],"PagingSize":30,"IsSortOn":true,"SortBy":"PayerGroupName","HFilter":"PayerGroupTypeID=7","Actions":[{"Text":"Данные клиента","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Return":"counterparts_upsert_0"}],"Filters":{"Columns":{"Город":"CityID","Название":"like:PayerGroupName"}},"Navigates":[{"PageId":"clientProfiles","Arg":"PayerGroupID","Column":"PayerGroupName"}]}],"Upserts":[{"TableMain":"PayerGroup","Title":"Данные контрагента","Hidden":["PayerGroup.PayerGroupTypeID"],"Exclude":["IsCurrent"]},{"TableMain":"PayerGroup","Title":"Данные банка","ToMain":["Bank"],"ColumnsView":[{"Name":"PayerGroupName","Order":1}],"Hidden":["PayerGroup.PayerGroupTypeID","PayerGroup.ClientSectorID"],"Exclude":["IsCurrent"]}]},
                    {"Url":"/crm/{id}/profile","Id":"clientProfiles","Settings":{"Header":{"Columns":["PayerGroupName","PayerGroupTypeID","ClientSectorID","CityID","Commentary"]}},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | {PayerGroupTypeID} | {ClientSectorID} | {CityID}</span> <h3>{PayerGroupName}</h3>","Menu12":"<!--@Nav(\"Документы\", \"docsList\", \"%Url.0%\", \"null\") @Nav(\"Проект Группы\", \"projectGroups\", \"%Url.0%\")-->"}}},"Master":{"Table":"PayerGroup","HFilter":"PayerGroupID=%url.0%"},"Menus":{"0":["profile"]},"Tabs":[{"Title":"Плательщики","Items":["clientProfiles_grid_0"]},{"Title":"Контакты","Items":["clientProfiles_grid_1"]},{"Title":"Запросы","Items":["clientProfiles_grid_2"]},{"Title":"Заказы","Items":["clientProfiles_grid_3"]},{"Title":"Счета","Items":["clientProfiles_grid_4"]},{"Title":"Проекты","Items":["clientProfiles_grid_5"]},{"Title":"Группы проектов","Items":["projectGroups_treeview_0"]},{"Title":"Компании","Items":["clientProfiles_grid_6"]},{"Title":"Пакеты документов","Items":["clientProfiles_grid_7"]}],"Grids":[{"Table":"Payer","ExcludedColumns":["PayerCEO_RodPadeg","PayerGroupID","isVATPayer"],"Navigates":[{"PageId":"payerView","Arg":"PayerID","Column":"PayerName"}],"HFilter":"PayerGroupID=%Url.0%","Paging":0,"ActionZone":[{"Text":"Добавить плательщика","IconCss":"icon-plus-sign","Controls":{"clientProfiles_upsert_0":{"ColVal":{"PayerGroupID":"%0%"}}}}],"Actions":[{"Text":"Изменить плательщика","Group":"","GroupIcon":"icon-list-ul","IconCss":"icon-edit-sign","Controls":{"clientProfiles_upsert_0":{"ColVal":{"":"%client%","PayerGroupID":"%0%"}}}}]},{"Table":"ContactPerson","VisibleColumns":["ShortName","ContactPosition"],"Navigates":[{"PageId":"contactpersonView","Arg":"ContactPersonID","Column":"ShortName"}],"ExcludedColumns":["PayerGroupID","ContactName","ContactSurname","ContactSecondName","isFemale","BirthDay","ContactDate","Commentary","isForContacts","isStaff","isUser","DocumentHolder.DocumentHolderID"],"JoinCustom":{"ContactPersonID":["DocumentHolder.DocumentHolderID"]},"Filters":{"Columns":{"Имя":"like:ContactName"}},"CustomColumns":[{"Name":"Phone","Sql":"'ee'"},{"Name":"Email","Sql":"'ee'"}],"ActionZone":[{"Text":"Новый контакт","IconCss":"icon-plus-sign","Controls":{"clientProfiles_upsert_2":{"Behavior":"Insert","TableMany":{"DefaultRows":[{"CPDetailsTypeID":"11"},{"CPDetailsTypeID":"22"}]},"ColVal":{"PayerGroupID":"%0%"}}}}],"SubGridShow":false,"CellFormat":{"Phone":"@SubGrid(0)","Email":"@SubGrid(1)"},"Grids":[{"Table":"ContactDetails","Join":{"CPDetailsTypeID":"CPDetailsClass"},"HFilter":"CPDetailsTypeID - CPDetailsClass=3","Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"{ContactDetailText}"}}}},{"Table":"ContactDetails","Join":{"CPDetailsTypeID":"CPDetailsClass"},"HFilter":"CPDetailsTypeID - CPDetailsClass=2","Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"{ContactDetailText}"}}}}],"HFilter":"PayerGroupID=%Url.0%","Actions":[{"Text":"Изменить контакт","Group":"","GroupIcon":"icon-list-ul","IconCss":"icon-edit-sign","Controls":{"clientProfiles_upsert_2":{"ColVal":{"":"%client%","PayerGroupID":"%0%"}}}},{"Text":"Права доступа","Group":"","IconCss":"icon-group","Return":"clientProfiles_upsert_3"},{"Text":"Добавить ID-документ","Group":"","IconCss":"icon-paper-clip","Controls":{"contactpersonView_upsert_0":{"Behavior":"Insert","ColVal":{"ContactPersonID":"%client%"}}}},{"Text":"Держатель документов","Filter":{"Elements":[{"Column":"ContactPersonID - DocumentHolder.DocumentHolderID","Validate":false,"Values":[null]}]},"IconCss":"icon-inbox","Group":"","ServerSide":true,"Items":[{"ActionType":"Insert","SourceTable":"ContactPerson","TargetTable":"DocumentHolder","Columns":{"DocumentHolderID":"ContactPersonID","DocumentHolderName":"ShortName","DocumentHolderTypeID":"%val.1%","PayerGroupID":"%0%"}}]}]},{"Table":"Inquiry","HFilter":"RequestorID - ContactPerson.PayerGroupID=%Url.0%","PartByDisplay":"InquiryStatusID","PartBy":"InquiryStatusID - InquiryStatus.InquiryStatusID","ActionZone":[{"Text":"Новый запрос","IconCss":"icon-plus-sign","Return":"clientProfiles_upsert_4"}],"Actions":[{"Text":"","IconCss":"icon-pencil","Return":"clientProfiles_upsert_4"}],"Filters":{"Columns":{"Название":"like:InquiryName","Тип":"InquiryTypeID","Статус":"InquiryStatusID"}},"Columns":{"Orders":{"InquiryDate":1,"InquiryName":2,"RequestorID":3,"InquiryTypeID":4}},"PagingSize":30,"IsSortOn":true,"SortBy":"InquiryDate","ExcludedColumns":["InquiryText","InquiryOwnerID"],"Navigates":[{"PageId":"inquiryView","Arg":"InquiryID","Column":"InquiryName"}]},{"Table":"Order","PagingSize":100,"HFilter":"PayerGroupID=%Url.0%","PartBy":"OrderStageID","Actions":[{"Text":"Изменить заказ","Group":"","IconCss":"icon-pencil","Return":"orderNew_upsert_0"},{"Text":"Подготовить счет","Group":"","IconCss":"icon-usd","Controls":{"billView_upsert_3":{"Behavior":"Insert","ColVal":{"OrderID":"%client%"}}}}],"ActionZone":[{"Text":"Создать заказ","IconCss":"icon-plus-sign","Controls":{"orderNew_upsert_0":{"Behavior":"Insert","ColVal":{"PayerGroupID":"%Url.0%"}}}}],"SortBy":"OrderDate","HideTitle":true,"ExcludedColumns":["OrderCode","PayerGroupID","OrderName","OrderAutoCode","isSale","SegmentID"],"Filters":{"Columns":{"Название":"like:OrderName","Ход выполнения":"OrderStageID","Статус оплаты":"OrderPaymentStatusID"}},"Navigates":[{"PageId":"orderView","Arg":"OrderID","Column":"OrderTitle"}]},{"Table":"Bills","HFilter":"PayerID - Payer.PayerGroupID=%Url.0%","PartBy":"BillStatusID","SortBy":"BillingDate","PagingSize":100,"ColWidth":{"BillCode":"5%"},"CellFormat":{"BillName":"@Nav(\"{BillName}\",  \"billView\", \"BillID\")","BillDetailSum":"{BillDetailSum} {CurrencyID - CurrencySign}"},"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"VisibleColumns":["BillCode","BillName","PayerID","BillingDate","BillDeadLine","BillStatusID"],"Navigates":[{"PageId":"billView","Arg":"BillID","Column":"BillName"}],"ActionZone":[{"Text":"Новый счет","IconCss":"icon-plus-sign","Return":"clientProfiles_upsert_5"}],"Actions":[{"Text":"","IconCss":"icon-print","Navigates":{"PageId":"billPrint","Arg":"BillID","Column":"BillName"}},{"Text":"Изменить счет","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"billView_upsert_1":{"ColVal":{"":"%client%"},"Vars":{"@orderId":"%client.OrderID%"}}}},{"Text":"Выставить счет","Group":"","IconCss":"icon-envelope","Filter":"BillStatusID=0","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.1%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.1%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":"BillStatusID=1","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Аннулирование","Group":"","IconCss":"icon-remove-sign","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.255%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.255%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Частичная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"0","TargetID":"%client%","PayStatus":"2"}}}},{"Text":"Полная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"1","TargetID":"%client%"}}}},{"Text":"Удалить счет","Group":"","IconCss":"icon-remove","Filter":"BillStatusID=0","ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"Bills","TargetTable":"Bills","DeleteBy":"BillID"}]}],"Filters":{"Columns":{"Название":"like:BillName","Код":"like:BillCode","Статус":"BillStatusID","Плательщик":{"link":"PayerID","FkFilter":"PayerGroupID=%0%"}}},"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}]},{"Table":"Project","PagingSize":100,"HFilter":"PayerGroupID=%Url.0%","PartByDisplay":"ProductID - ProjectTypeID","PartBy":"ProductID - ProjectTypeID - SolutionOrder","SortBy":"RegisterDate","ColWidth":{"ProjectName":"50%"},"ActionZone":[{"Text":"Бесплатный проект","IconCss":"icon-plus-sign","Controls":{"clientProfiles_upsert_1":{"ColVal":{"PayerGroupID":"%0%","StatusID":"1"}}}}],"VisibleColumns":["ProjectName","RegisterDate","StatusID"],"Filters":{"Columns":{"Название":"like:ProjectName","Статус":"StatusID","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"PayerGroupID":3,"RegisterDate":4}},"Navigates":[{"PageId":"projectView","Arg":"ProjectID","Column":"ProjectName"}]},{"Table":"OffshoreCompany","HFilter":"OwnerPayerGroupID=%Url.0%","PartByDisplay":"OffshoreCompanyStatusID","PartBy":"OffshoreCompanyStatusID - OffshoreCompanyStatusID","ActionZone":[{"Text":"Новая компания","IconCss":"icon-plus-sign","Controls":{"offshoreList_upsert_0":{"ColVal":{"OwnerPayerGroupID":"%0%"}}}}],"PagingSize":30,"IsSortOn":true,"SortBy":"OffshoreCompanyName","ExcludedColumns":["IsShelfCompany","NomineeServiceProviderID","OwnerPayerGroupID"],"Navigates":[{"PageId":"offshoreView","Arg":"OffshoreCompanyID","Column":"OffshoreCompanyName"}]},{"Table":"DocumentPackage","HFilter":"OwnerPayerGroupID=%Url.0%","PartByDisplay":"DocumentPackageStatusID","PartBy":"DocumentPackageStatusID - DocumentPackageStatus.DocumentPackageStatusID","Actions":[{"Text":"","IconCss":"icon-pencil","Return":"docpackageView_upsert_0"}],"Filters":{"Columns":{"Название":"like:DocumentPackageName"}},"PagingSize":30,"IsSortOn":true,"SortBy":"DocumentPackageName","ExcludedColumns":["ClientID","InheretedDocumentPackageID"],"Navigates":[{"PageId":"docpackageView","Arg":"DocumentPackageID","Column":"DocumentPackageName","NavByColumn":true}]}],"Actions":[{"Text":"Данные клиента","Group":"","GroupIcon":"icon-th","IconCss":"icon-pencil","Controls":{"clientProfiles_upsert_6":{"ColVal":{"":"%0%"}}}}],"Upserts":[{"TableMain":"Payer","Title":"Данные плательщика","Width":"800px","FkFilter":{"PayerDetails.CPDetailsTypeID":"fPayer=1"},"TablesMany":[{"Table":"PayerDetails","NameTop":true,"ColWidth":["150px","","75px"],"Name":"Данные","ShowHeader":true,"Position":"after.Payer.ClientSectorID","CanManualAdd":"True","MaxCountManual":50}]},{"TableMain":"Project","Defaults":{"Project.ProjectManagerStaffID":"%user.ContactPersonID%","Project.RegisterDate":"%userdatetime%"},"SelectHelper":{"Project.ProductID":{"Return":{"id":"ProductID"},"ReturnType":"popover","Hierarchies":[{"TableName":"Practice","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Solution","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Product","PathFromPrev":"SolutionToProduct.ProductID","Filter":"Visible=1"}]}},"Exclude":["IsTaskFormFilled","StartDate","ProjectGroupID"]},{"TableMain":"ContactPerson","Title":"Данные контактного лица","Width":"800px","FkFilter":{"ContactDetails.CPDetailsTypeID":"fCP=1"},"TablesMany":[{"Table":"ContactDetails","Name":"Телефоны","Position":"after.ContactPerson.ContactDate","CanManualAdd":"True","MaxCountManual":50}],"Exclude":["isStaff","isUser"],"Hidden":["ContactPerson.ContactDate","PayerGroupID"],"Defaults":{"ContactDetails.CPDetailsTypeID":"","ContactPerson.ContactDate":"%userdatetime%","ContactPerson.ContactName":"%user.ContactPersonID - PayerGroupID - PayerGroupName%"}},{"TableMain":"ContactPerson","Exclude":["PayerGroupID","ContactName","ContactSurname","ContactSecondName","ContactPosition","isFemale","BirthDay","ContactDate","Commentary","isForContacts","isStaff","isUser","LastLoginDate","LastIP","OrderLimit"],"ToMain":["User"],"ActionItems":[{"ActionType":"Master.AddUser","SourceTable":"User","Columns":{"Login":"Login","Password":"Password","clientId":"UserID"}}]},{"TableMain":"Inquiry","Title":"Данные запроса","FkFilter":{"Inquiry.RequestorID":"PayerGroupID=%Url.0%"},"Defaults":{"Inquiry.InquiryStatusID":"1","Inquiry.InquiryPriorityID":"100","Inquiry.InquiryOwnerID":"%user.ContactPersonID%"},"Hidden":["Inquiry.InquiryStatusID","InquiryOwnerID"]},{"TableMain":"Bills","Title":"Подготовить счёт на оплату","Width":"800px","TablesMany":[{"Table":"BillDetail","NameTop":true,"ShowHeader":true,"Collapse":"OrderDetailID","ColWidth":["20px","","106px","86px"],"Name":"Позиции счёта","Position":"after.Bills.BillDeadLine","CanManualAdd":"True","MaxCountManual":50}],"ToRequest":{"Bills.PayerID":["OrderID"]},"Defaults":{"Bills.BeneficiaryID":"","Bills.BillStatusID":"0","BillDetail.OrderDetailID":"","Bills.LanguageID":"","Bills.VATRateID":"","Bills.CurrencyID":"2"},"Hidden":["BillStatusID","VATRateID"],"FkFilter":{"Bills.PayerID":"PayerGroupID=%url.0%","Bills.OrderID":"PayerGroupID=%url.0%","Bills.BeneficiaryID":"PayerGroupID=%const.zbid%","BillDetail.OrderDetailID":"OrderID=%url.0%"}},{"TableMain":"PayerGroup","Title":"Данные клиента","ToMain":["Client"],"ActionItems":[{"ActionParams":{"Method":"PayerGroupCrypto"}}],"ServerData":{"PayerGroupTypeID":"4"},"FkFilter":{"Client.ClientSourceID":"SegmentID=1"},"Redirect":{"PageId":"clientProfiles","Args":["%pk%"]},"Defaults":{"PayerGroup.ClientSectorID":"","PayerGroup.CityID":"2","Client.ClientManagerID":"%user%","Client.DiscountProgramID":""},"Hidden":["Client.SegmentID"],"Exclude":["PayerGroupTypeID","IsCurrent","DiscountRate"]}]},
                    {"Url":"/crm/{id}/contactperson","Id":"contactpersonView","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | {PayerGroupID} | {ContactPosition}</span> <h3>{ShortName}</h3>"}}},"Master":{"Table":"ContactPerson","HFilter":"ContactPersonID=%url.0%"},"Tabs":[{"Title":"ID Документы","Items":["contactpersonView_grid_0"]},{"Title":"Запросы","Items":["contactpersonView_grid_1"]}],"Grids":[{"Table":"IdentityDocument","ExcludedColumns":["ContactPersonID"],"PartBy":"IsValid","ActionZone":[{"Text":"Новый ID-документ","IconCss":"icon-plus-sign","Controls":{"contactpersonView_upsert_0":{"Behavior":"Insert","ColVal":{"ContactPersonID":"%0%"}}}}],"HFilter":"ContactPersonID=%url.0%","Actions":[{"Text":"Изменить ID-документ","Group":"","GroupIcon":"icon-list-ul","IconCss":"icon-edit-sign","Controls":{"contactpersonView_upsert_0":{"ColVal":{"IdentityDocumentID":"%0%"}}}}]},{"Table":"Inquiry","HFilter":"RequestorID=%url.0%","PartByDisplay":"InquiryStatusID","PartBy":"InquiryStatusID - InquiryStatus.InquiryStatusID","ActionZone":[{"Text":"Новый запрос","IconCss":"icon-plus-sign","Return":"contactpersonView_upsert_1"}],"Actions":[{"Text":"","IconCss":"icon-pencil","Return":"contactpersonView_upsert_1"}],"Filters":{"Columns":{"Название":"like:InquiryName","Тип":"InquiryTypeID","Статус":"InquiryStatusID"}},"Columns":{"Orders":{"InquiryDate":1,"InquiryName":2,"RequestorID":3,"InquiryTypeID":4}},"PagingSize":30,"IsSortOn":true,"SortBy":"InquiryDate","ExcludedColumns":["InquiryText","InquiryOwnerID"],"Navigates":[{"PageId":"inquiryView","Arg":"InquiryID","Column":"InquiryName"}]}],"Actions":[{"Text":"Данные","Group":"","GroupIcon":"icon-th","IconCss":"icon-pencil","Controls":{"clientProfiles_upsert_2":{"ColVal":{"":"%0%"}}}}],"Upserts":[{"TableMain":"IdentityDocument","Title":"Данные ID-документа","Defaults":{"IdentityDocument.IdentityDocumentTypeID":"","IdentityDocument.IsValid":"1"}},{"TableMain":"Inquiry","Title":"Данные запроса","FkFilter":{"Inquiry.RequestorID":"PayerGroupID=%main.PayerGroupID%"},"Defaults":{"Inquiry.InquiryStatusID":"1","Inquiry.InquiryPriorityID":"100","Inquiry.InquiryOwnerID":"%user.ContactPersonID%"},"Hidden":["Inquiry.InquiryStatusID","InquiryOwnerID"]}]},
                    {"Url":"/crm/{id}/payer","Id":"payerView","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | {PayerGroupID} | {PayerType}</span> <h3>{PayerName}</h3>"}}},"Master":{"Table":"Payer","HFilter":"PayerID=%url.0%"},"Tabs":[{"Title":"Банковские счета","Items":["payerView_grid_0"]}],"Grids":[{"Table":"BankAccount","ExcludedColumns":["ContactPersonID"],"PartBy":"BankAccountTypeID","ActionZone":[{"Text":"Новый счет","IconCss":"icon-plus-sign","Controls":{"payerView_upsert_0":{"Behavior":"Insert","ColVal":{"PayerID":"%0%"}}}}],"HFilter":"PayerID=%url.0%","Actions":[{"Text":"Изменить","Group":"","GroupIcon":"icon-list-ul","IconCss":"icon-pencil","Controls":{"payerView_upsert_0":{"ColVal":{"":"%client%","PayerID":"%0%"}}}}]}],"Actions":[{"Text":"Данные","Group":"","GroupIcon":"icon-th","IconCss":"icon-pencil","Controls":{"clientProfiles_upsert_0":{"ColVal":{"":"%0%"}}}}],"Upserts":[{"TableMain":"BankAccount","Title":"Данные банковского счета","Defaults":{"IdentityDocument.IdentityDocumentTypeID":"","IdentityDocument.IsValid":"1"}}]},
                    {"__Order__":"","Url":"/crm/orders","Id":"ordersLast","Master":{"Table":"Segment","CustomColumns":[{"Name":"AutoCode","Sql":" (select max(OrderAutoCode) + 1 from [Order]) "}]},"Grids":[{"Table":"Order","HFilter":"SegmentID=1","PartBy":"OrderStageID - OrderStageID","PartByDisplay":"OrderStageID","SortBy":"OrderDate","PagingSize":"30","Actions":[{"Text":"","IconCss":"icon-edit-sign","Return":"orderNew_upsert_0"},{"Text":"","IconCss":"icon-tasks","Return":["ordersLastBillProj_grid_0","ordersLastBillProj_grid_1"]}],"ActionZone":[{"Text":"Создать заказ","IconCss":"icon-plus-sign","Return":"orderNew_upsert_0"}],"Columns":{"Orders":{"OrderAutoCode":1,"OrderDate":2,"OrderName":3,"PayerGroupID":4,"OrderPaymentStatusID":5}},"VisibleColumns":["OrderCode","OrderDate","OrderName","PayerGroupID","OrderStageID","OrderPaymentStatusID"],"Filters":{"Columns":{"Название":"like:OrderName","Ход выполнения":"OrderStageID","Статус оплаты":"OrderPaymentStatusID"},"Beetwens":{"Дата заказа":"OrderDate"}},"Navigates":[{"PageId":"orderView","Arg":"OrderID","Column":"OrderName"},{"PageId":"clientProfiles","Arg":"PayerGroupID","Column":"PayerGroupID"}]}]},
                    {"Url":"/crm/{id}/order","Id":"orderView","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | Стадия: {OrderStageID} | Статус: {OrderPaymentStatusID}</span><h3>{OrderName}</h3>","Menu12":"Заказ №{OrderAutoCode} от {OrderDate} | Клиент: @Nav(\"{PayerGroupID}\", \"clientProfiles\", \"%Main.PayerGroupID%\")"}}},"Master":{"Table":"Order","HFilter":"OrderID=%0%"},"Tabs":[{"Title":"Детали заказа","Items":["orderView_grid_0"]},{"Title":"Счета на оплату","Items":["orderView_grid_1"]}],"Grids":[{"Table":"OrderDetail","JoinCustom":{"OrderDetailID":["Project.StatusID","Project.ProjectID","Project.RegisterDate"]},"HFilter":"OrderID=%0%","ActionZone":[{"Text":"Добавить проект","IconCss":"icon-tasks","Controls":{"orderView_upsert_0":{"ColVal":{"OrderID":"%0%"}}}}],"ExcludedColumns":["Amount","Project.ProjectID","OrderDetailClass","OrderID","ObjectID"],"CellFormat":{"OrderDetailName":"@Nav(\"{OrderDetailName}\",  \"projectView\", \"OrderDetailID - Project.ProjectID\")"},"Actions":[{"Text":"","IconCss":"icon-play","Filter":"OrderDetailClass=0","Return":"orderView_upsert_1"},{"Text":"","IconCss":"icon-link","Filter":"OrderDetailClass=1","Navigates":{"PageId":"projectView","Arg":"OrderDetailID","Column":"OrderDetailName"}}]},{"Table":"Bills","VisibleColumns":["BillCode","BillName","PayerID","BillingDate","BillDeadLine","BillStatusID"],"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"CellFormat":{"BillDetailSum":"{BillDetailSum} {CurrencyID}"},"HFilter":"OrderID=%0%","FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"ActionZone":[{"Text":"Выставить счет","IconCss":"icon-file-text","Controls":{"billView_upsert_0":{"Vars":{"@orderId":"%url.0%"},"TableMany":{"DefaultRows":[{"OrderDetailID":"","Price":"0","Quantity":"1"}]},"ColVal":{"OrderID":"%0%"}}}}],"Navigates":[{"PageId":"billView","Arg":"BillID","Column":"BillName"}],"Actions":[{"Text":"Изменить счет","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"billView_upsert_1":{"ColVal":{"":"%client%"},"Vars":{"@orderId":"%client.OrderID%"}}}},{"Text":"Выставить счет","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["0"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.1%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.1%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Аннулирование","Group":"","IconCss":"icon-remove-sign","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.255%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.255%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Частичная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"0","TargetID":"%client%","PayStatus":"2"}}}},{"Text":"Полная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"1","TargetID":"%client%"}}}},{"Text":"Удалить счет","Group":"","IconCss":"icon-remove","Filter":"BillStatusID=0","ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"Bills","TargetTable":"Bills","DeleteBy":"BillID"}]},{"Text":"","IconCss":"icon-print","Navigates":{"PageId":"billPrint","Arg":"BillID","Column":"BillName"}}]}],"Actions":[{"Text":"Данные","Group":"","GroupIcon":"icon-th","IconCss":"icon-tasks","Controls":{"orderNew_upsert_0":{"ColVal":{"":"%0%"}}}}],"Upserts":[{"TableMain":"OrderDetail","Defaults":{"OrderDetail.OrderDetailClass":"0"},"Width":"800px","Hidden":["ObjectID","OrderDetailClass"],"SelectHelper":{"OrderDetail.OrderDetailName":{"Return":{"id":"ObjectID","text":"OrderDetailName"},"ReturnType":"popover","Hierarchies":[{"TableName":"Practice","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Solution","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Product","PathFromPrev":"SolutionToProduct.ProductID","Filter":"Visible=1"}]}}},{"TableMain":"OrderDetail","Width":"800px","ActionOnly":false,"ActionItems":[{"ActionParams":{"Method":"PlayProject();"}}],"Redirect":{"PageId":"projectView","Args":["%pk%"]},"CustomColumns":[{"Name":"RegisterDate","DataType":"date"},{"Name":"Staff","FK":"Staff"}],"Exclude":["OrderID","ObjectID","OrderDetailClass"]}]},
                    {"Url":"/crm/order/last/bill-proj","Id":"ordersLastBillProj","Grids":[{"Table":"OrderDetail","Collapse":true,"Name":"OrderDetailSub","HideTitle":true,"JoinCustom":{"OrderDetailID":["Project.RegisterDate","Project.StatusID"]},"ColWidth":{"OrderDetailName":"70%"},"VisibleColumns":["OrderDetailName"],"HFilter":"OrderID=%client%","Navigates":[{"PageId":"projectView","Arg":"OrderDetailID","Column":"OrderDetailName"}]},{"Table":"Bills","IsSortOn":true,"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"HideTitle":true,"HFilter":"OrderID=%client%","VisibleColumns":["BillName","BillingDate"]},{"Table":"TimeTracker","HFilter":"TaskID=%client%","ExcludedColumns":["TaskID"]}]},
                    {"Url":"/crm/order/new","Id":"orderNew","Upserts":[{"TableMain":"Order","AjaxOnly":false,"Title":"Портфель заказов","TablesMany":[{"Table":"OrderDetail","Name":"Details","Hidden":["ObjectID","OrderDetailClass"],"Position":"after.Order.OrderDate","CanManualAdd":"True","MaxCountManual":5}],"Width":"800px","Defaults":{"Order.OrderPaymentStatusID":"","Order.OrderStageID":"0","Order.SegmentID":"1","Order.isSale":"1","Order.OrderDate":"%userdatetime%","OrderDetail.OrderDetailClass":"0"},"Hidden":["Order.SegmentID","Order.isSale"],"ColumnsView":[{"Name":"Details","NameAlign":"top"},{"Name":"OrderName","Order":1}],"SelectHelper":{"OrderDetail.OrderDetailName":{"Return":{"id":"ObjectID","text":"OrderDetailName"},"ReturnType":"popover","Hierarchies":[{"TableName":"Practice","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Solution","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Product","PathFromPrev":"SolutionToProduct.ProductID","Filter":"Visible=1"}]}}}]},
                    {"Url":"/crm/inquiry/pending","Id":"inquiryList","Grids":[{"Table":"Inquiry","HFilter":"InquiryOwnerID=%user.ContactPersonID%","PartByDisplay":"InquiryStatusID","PartBy":"InquiryStatusID - InquiryStatus.InquiryStatusID","ActionZone":[{"Text":"Новый запрос","IconCss":"icon-plus-sign","Return":"inquiryList_upsert_0"}],"Actions":[{"Text":"","IconCss":"icon-pencil","Return":"inquiryList_upsert_1"}],"Filters":{"Columns":{"Название":"like:InquiryName","Тип":"InquiryTypeID","Статус":"InquiryStatusID"}},"Columns":{"Orders":{"InquiryDate":1,"InquiryName":2,"RequestorID":3,"InquiryTypeID":4}},"PagingSize":30,"IsSortOn":true,"SortBy":"InquiryDate","ExcludedColumns":["InquiryText","InquiryOwnerID"],"Navigates":[{"PageId":"inquiryView","Arg":"InquiryID","Column":"InquiryName"}]}],"Upserts":[{"TableMain":"Inquiry","Title":"Данные запроса","Defaults":{"Inquiry.InquiryStatusID":"1","Inquiry.InquiryPriorityID":"100","Inquiry.InquiryOwnerID":"01d68c5f-b4f9-4394-aaa8-35d4c9c8d36a"},"Hidden":["Inquiry.InquiryStatusID","InquiryOwnerID"]},{"TableMain":"Inquiry","Hidden":["InquiryOwnerID"]}]},
                    {"__Bill__":"","Url":"/crm/{id}/bill","Id":"billView","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | Дата счета - {BillingDate} | Статус - {BillStatusID}</span> <h3>Счёт №{BillCode} {BillName}</h3>"}}},"Master":{"Table":"Bills","HFilter":"BillID=%0%"},"Tabs":[{"Title":"Позиции","Items":["billView_grid_0"]},{"Title":"Оплаты","Items":["billView_grid_1"]},{"Title":"Хронология","Items":["billView_grid_2"]}],"Actions":[{"Text":"Изменить счет","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"billView_upsert_1":{"Vars":{"@orderId":"%main.OrderID%"},"ColVal":{"":"%0%"}}}},{"Text":"Выставить счет","Group":"","IconCss":"icon-envelope","Filter":"BillStatusID=0","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.1%","":"%0%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"%0%","BillStatusID":"%val.1%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":"BillStatusID=1","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%","":"%0%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"%0%","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Аннулирование","Group":"","IconCss":"icon-remove-sign","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.255%","":"%0%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"%0%","BillStatusID":"%val.255%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Частичная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"0","TargetID":"%0%","PayStatus":"2"}}}},{"Text":"Полная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"1","TargetID":"%0%"}}}},{"Text":"Удалить счет","Group":"","IconCss":"icon-remove","Filter":"BillStatusID=0","ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"Bills","TargetTable":"Bills","DeleteBy":"%0%"}]},{"Text":"На печать","Group":"","IconCss":"icon-print","Navigates":{"PageId":"billPrint","Arg":"%0%"}}],"Grids":[{"Table":"BillDetail","HFilter":"BillID=%0%","ExcludedColumns":["BillID","OrderDetailID"],"ColWidth":{"Price":"7%","Quantity":"4%","Amount":"7%"}},{"Table":"BillPayments","HFilter":"BillID=%0%","Columns":{"Orders":{"PaymentDate":2,"CashFlowID":11,"Sum":10}},"CellFormat":{"Sum":"{Sum} {CashFlowID - CashAccountID - CurrencyID - CurrencySign}"},"Join":{"CashFlowID":["CashAccountID - CurrencyID - CurrencySign","PaymentDate"]},"ExcludedColumns":["BillID","IsFullPaid"]},{"Table":"BillHistory","HFilter":"BillID=%0%","ExcludedColumns":["BillID"],"SortBy":"BillHistoryDate"}],"Upserts":[{"Title":"Подготовить счёт на оплату","TableMain":"Bills","Width":"800px","TablesMany":[{"Table":"BillDetail","NameTop":true,"ShowHeader":true,"Collapse":"OrderDetailID","ColWidth":["20px","","106px","86px"],"Name":"Позиции счёта","Position":"after.Bills.BillDeadLine","CanManualAdd":"True","MaxCountManual":50}],"ToRequest":{"Bills.PayerID":["OrderID"]},"Defaults":{"Bills.PayerID":"","Bills.BeneficiaryID":"","Bills.BillCode":"%main.OrderAutoCode%","Bills.BillName":"%main.OrderName%","Bills.BillingDate":"%userdatetime%","Bills.BillStatusID":"0","BillDetail.OrderDetailID":"","Bills.LanguageID":"","Bills.VATRateID":"","Bills.CurrencyID":"2"},"Hidden":["BillStatusID","VATRateID"],"FkFilter":{"BillDetail.OrderDetailID":"OrderID=%@orderId%","Bills.PayerID":{"Elements":[{"Column":"PayerGroupID","Query":{"Column":"Order.PayerGroupID","PK":"%@orderId%"}}]},"Bills.BeneficiaryID":"PayerGroupID=%const.zbid%"}},{"Title":"Изменить счёт на оплату","TableMain":"Bills","Width":"800px","TablesMany":[{"Table":"BillDetail","NameTop":true,"ShowHeader":true,"Collapse":"OrderDetailID","ColWidth":["20px","","106px","86px"],"Name":"Позиции счёта","Position":"after.Bills.BillName","CanManualAdd":"True","MaxCountManual":50}],"Configuration":{"Vars":{"@orderId":"%req.Bills.OrderID%"}},"Hidden":["OrderID","BillStatusID","VATRateID"],"ToRequest":{"Bills.PayerID":["OrderID"],"BillDetail.OrderDetailID":["Bills.OrderID"]},"Defaults":{"Bills.BeneficiaryID":""},"FkFilter":{"Bills.PayerID":{"Elements":[{"Column":"PayerGroupID","Query":{"Column":"Order.PayerGroupID","PK":"%@orderId%"}}]},"Bills.BeneficiaryID":"PayerGroupID=%const.zbid%","BillDetail.OrderDetailID":"OrderID=%@orderId%"}},{"TableMain":"CashFlow","Title":"Зачисление оплаты","Exclude":["CashFlowTypeID"],"Hidden":["TargetID"],"ServerData":{"CashFlowTypeID":"1"},"ColumnsView":[{"Name":"CurrencyID","Order":1},{"Name":"CashAccountID","Order":2}],"CustomColumns":[{"Name":"IsFullPaid"},{"Name":"PayStatus","FK":"OrderPaymentStatusDict"},{"Name":"CurrencyID","FK":"Currency"}],"FkFilter":{"CashFlow.PayStatus":"OrderPaymentStatusID=[2,3]","CashFlow.CashAccountID":"CurrencyID=%req.CashFlow.CurrencyID%"},"ActionItems":[{"ActionParams":{"Method":"BillPay"}}]},{"Title":"Подготовить счёт на оплату","TableMain":"Bills","Width":"800px","TablesMany":[{"Table":"BillDetail","NameTop":true,"ShowHeader":true,"Collapse":"OrderDetailID","ColWidth":["20px","","106px","86px"],"Name":"Позиции счёта","Position":"after.Bills.BillDeadLine","CanManualAdd":"True","MaxCountManual":50}],"ToRequest":{"Bills.PayerID":["OrderID"]},"Defaults":{"Bills.BeneficiaryID":"","Bills.BillStatusID":"0","BillDetail.OrderDetailID":"","Bills.LanguageID":"","Bills.VATRateID":"","Bills.CurrencyID":"2"},"Hidden":["BillStatusID","VATRateID"],"FkFilter":{"Bills.PayerID":{"Elements":[{"Column":"PayerGroupID","Query":{"Column":"Order.PayerGroupID","PK":"%client%"}}]},"Bills.BeneficiaryID":"PayerGroupID=%const.zbid%","BillDetail.OrderDetailID":"OrderID=%client%"}},{"Title":"Групповая оплата","TableMain":"CashFlow","UsePackClass":true,"Width":"800px","ColumnsView":[{"Name":"CurrencyID","Order":1},{"Name":"CashAccountID","Order":2}],"CustomColumns":[{"Name":"CurrencyID","FK":"Currency"}],"FkFilter":{"CashFlow.CashAccountID":"CurrencyID=%req.CashFlow.CurrencyID%"},"TablesMany":[{"Table":"BillPayments","ShowHeader":true,"Name":"Выбранные счета","Position":"after.CashFlow.CashAccountID"}],"Exclude":["TargetID","PaymentDate","CashFlowTypeID"],"ServerData":{"CashFlowTypeID":"1","PaymentDate":"%userdatetime%"}}]},
                    {"Url":"/crm/bills","Id":"pendingBills","Grids":[{"Table":"Bills","HFilter":"BillStatusID<10 and OrderID - SegmentID=1","PartBy":"BillStatusID","PagingSize":20,"ColWidth":{"BillCode":"5%"},"CellFormat":{"BillName":"@Nav(\"{BillName}\",  \"billView\", \"BillID\")","BillDetailSum":"{BillDetailSum} {CurrencyID - CurrencySign}"},"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"VisibleColumns":["BillCode","BillName","PayerID","BillingDate","BillDeadLine","BillStatusID"],"ExcludedColumns":["OrderID","BillDiscount","BeneficiaryID","VATRateID","CurrencyID","LanguageID"],"EditableColumns":["BillCode"],"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"ActionZone":[{"Text":"Групповая оплата","MultiRow":true,"Controls":{"billView_upsert_4":{}}}],"Actions":[{"Text":"Изменить счет","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"billView_upsert_1":{"ColVal":{"":"%client%"},"Vars":{"@orderId":"%client.OrderID%"}}}},{"Text":"Выставить счет","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["0"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.1%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.1%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Аннулирование","Group":"","IconCss":"icon-remove-sign","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.255%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.255%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Частичная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"0","TargetID":"%client%","PayStatus":"2"}}}},{"Text":"Полная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"1","TargetID":"%client%"}}}},{"Text":"Удалить счет","Group":"","IconCss":"icon-remove","Filter":{"Elements":[{"Column":"BillStatusID","Values":[0]}]},"ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"Bills","TargetTable":"Bills","DeleteBy":"BillID"}]},{"Text":"","IconCss":"icon-print","Navigates":{"PageId":"billPrint","Arg":"BillID","Column":"BillName"}}],"Filters":{"Columns":{"Код":"like:BillCode","Название":"like:BillName"},"Beetwens":{"Дата":"BillingDate"}}}]},
                    {"Url":"/crm/{id}/printbill","Id":"billPrint","TemplateConfig":{"PageTemplate":{"LineFormat":{"All":"<div class='col-md-12 billtext' style='max-width: 1000px; font-family: Tahoma'><div class='row'><div class='col-md-6'><span>Supplier: </span><br><h5 class='billtext bold'>{BeneficiaryID}</h5><span class='billtext'>@Grid(1)</span> {BeneficiaryBankAccountID - BankAccountNumber} <br> {BeneficiaryBankAccountID - BankID - BankID - PayerGroupName} <br> {BeneficiaryBankAccountID - BankID - BankAddress}<br> {BeneficiaryBankAccountID - BankID - SWIFT} </div> <div class='col-md-6'><span class='billtext'>Payer: </span><br> <h5 class='billtext bold'>{PayerID}</h5><span class='billtext bold'>@Grid(2)</span></div></div><br><span class='billtext bold'>Issue date: {BillingDate}</span><h4 style='text-align:center;letter-spacing: -1;font-size: 20px;'>PROFORMA-INVOICE №{BillCode}</h4> <br> @Grid(0)  {PayerBankAccountID - BankAccountNumber} <br> {PayerBankAccountID - BankID - BankID - PayerGroupName} <br> {PayerBankAccountID - BankID - BankAddress}<br> {PayerBankAccountID - BankID - SWIFT}  <span style='font-weight: bold; margin-left: 10px'> TOTAL AMOUNT - {BillDetailSum} {%main.CurrencyID - CurrencySign%}</span> </div>"}}},"Master":{"Table":"Bills","HFilter":"BillID=%0%","Join":{"CurrencyID":"CurrencySign","PayerID":"PayerCEO","BeneficiaryID":"PayerCEO","BeneficiaryBankAccountID":["BankAccountNumber","BankID - BankID - PayerGroupName","BankID - BankAddress","BankID - SWIFT"],"PayerBankAccountID":["BankAccountNumber","BankID - BankID - PayerGroupName","BankID - BankAddress","BankID - SWIFT"]},"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}]},"Grids":[{"Table":"BillDetail","Name":"billPrintDetail","Language":"%main.LanguageID%","HideTitle":true,"HFilter":"BillID=%0%","ExcludedColumns":["BillID","OrderDetailID"],"ColWidth":{"Price":"7%","Quantity":"4%","Amount":"7%"}},{"Table":"PayerDetails","HFilter":"PayerID=%main.BeneficiaryID%","HideTitle":true,"Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"@Br(\"{PayerDetailText}\")"}}}},{"Table":"PayerDetails","HFilter":"PayerID=%main.PayerID%","HideTitle":true,"Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"@Br(\"{PayerDetailText}\")"}}}}]},
                    {"Url":"/crm/bills/payments","Id":"billpayments","Grids":[{"Table":"CashFlow","Name":"payments","SortBy":"PaymentDate","PagingSize":30,"Columns":{"Orders":{"PaymentDate":1,"CashAccountID":2,"Sum":6,"CurrencyID":7}},"ExcludedColumns":["UserID","TargetID","CashFlowTypeID","DT"],"HFilter":{"Elements":[{"Column":"CashFlowTypeID","Values":[1]}]},"Filters":{"Columns":{"Сумма":"like:Sum","Детали":"like:PaymentComment"},"Beetwens":{"Дата":"PaymentDate"}},"Join":{"CashAccountID":["CurrencyID"]}}]},
                    { "__Project__": "","Url": "/crm/{id}/projectgroups","Id": "projectGroups","TemplateConfig": {"PageTemplate":{"LineFormat":{"Title12":"<h3>Проект Группы @Nav(\"{PayerGroupName}\", \"clientProfiles\", \"%Url.0%\")</h3>"}}},"Master": {"Table":"PayerGroup","HFilter":"PayerGroupID=%0%"},"Actions": [{"Text":"Новая группа","IconCss":"icon-plus-sign","Return":"projectGroups_upsert_0"}],"HierarchicalTreeViews": [{"Table": "ProjectGroup","SelfRelation": true,"HFilter": "PayerGroupID=%0%","Data": {"icon":"icon-folder-close-alt"},"RowCount": 0,"Actions": [{"Type":"Edit","Group":"","Text":"Edit Group"},{"Type":"Add","Group":"","IconCss":"icon-plus-sign","Text":"Add","ColVal":{"PayerGroupID":"%main.PayerGroupID%"}},{"Text":"Добавить группу","Group":"","IconCss":"icon-plus-sign","Controls":{"projectGroups_upsert_0":{"Behavior":"Insert","ColVal":{"inProjectGroupID":"%client%","PayerGroupID":"%0%"}}}},{"Text":"Редактировать","Group":"","IconCss":"icon-pencil","Return":"projectGroups_upsert_1"},{"Text":"Удалить","Group":"","IconCss":"icon-remove","ServerSide":true,"Items":[{"ActionParams":{"Method":"ProjectGroupRemove"}}]}],"Items": [{"Table": "Project","RowCount": 0,"AllowParentNull": true,"HFilter": "PayerGroupID=%0%","Data": {"icon":"icon-tasks"},"Nav": {},"Actions": [{"Type":"Edit","Group":"","Text":"Edit Project"},{"Text":"Переместить","Group":"","IconCss":"icon-sitemap","Return":"projectGroups_upsert_2"}]}]}],"Upserts": [{"TableMain":"ProjectGroup","Configuration":{"ColVal":{"PayerGroupID":"%0%"}},"TreeViews":[{"Table":"ProjectGroup","Initiator":"ProjectGroup.inProjectGroupID","Display":"Replace","HFilter":{"Elements":[{"Column":"PayerGroupID","Values":["%Url.0%"]}]}}]},{"TableMain":"ProjectGroup","Configuration":{"ColVal":{"PayerGroupID":"%0%"}},"TreeViews":[{"Table":"ProjectGroup","Initiator":"ProjectGroup.inProjectGroupID","Display":"Replace","HFilter":{"Elements":[{"Column":"PayerGroupID","Values":["%Url.0%"]},{"Column":"ProjectGroupID","Type":"!=","Values":["%upsertpk%"]}]}}]},{"TableMain":"Project","TreeViews":[{"Table":"ProjectGroup","Initiator":"Project.ProjectGroupID","Display":"Replace","HFilter":{"Elements":[{"Column":"PayerGroupID","Values":["%Url.0%"]}]}}],"Exclude":["ProductID","ProjectName","ProjectManagerStaffID","StatusID","IsTaskFormFilled","StartDate","PayerGroupID","RegisterDate","DefaultFolderID"]}]},
                    {"Url":"/crm/tasks","Id":"tasks","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Текущие задачи</h3>"}}},"Tabs":[{"Title":"Мои задачи","Items":["tasks_grid_0"]},{"Title":"Входящие задания","Items":["tasks_grid_1"]},{"Title":"Поручения","Items":["tasks_grid_2"]}],"Grids":[{"Table":"Task","PartByDisplay":"TaskStatusID","PartBy":"TaskStatusID - TaskStatus.TaskStatusID","ExcludedColumns":["TaskText","ManagerID","ResponsibleID"],"HFilter":{"Elements":[{"Column":"ManagerID","Values":["%user.ContactPersonID%"]},{"Column":"ResponsibleID","Type":"=","Values":[null]}]},"Actions":[{"Text":"Изменить","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Return":"tasks_upsert_0"},{"Text":"Трекер","IsAlt":true,"IconCss":"icon-time","Return":"ordersLastBillProj_grid_2"},{"Text":"Начать","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["1"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"StartDate":"%userdatetime%","TaskStatusID":"%val.2%"}}]},{"Text":"Продолжить","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["5"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"TaskStatusID":"%val.2%"}}]},{"Text":"Завершить","IsAlt":true,"IconCss":"icon-flag-checkered","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"CompleteDate":"%userdatetime%","TaskStatusID":"%val.3%"}}]},{"Text":"Возобновить","Group":"","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["3"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"CompleteDate":"%val.null%","TaskStatusID":"%val.2%"}}]},{"Text":"Приостановить","Group":"","IconCss":"icon-pause","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"TaskStatusID":"%val.5%"}}]},{"Text":"Запустить таймер","Group":"","IconCss":"icon-time","Filter":{"Elements":[{"Column":"TaskStatusID","Values":["2"]}]},"Controls":{"taskView_upsert_0":{"ColVal":{"TaskID":"%client%","StaffID":"%user.ContactPersonID%"}}}},{"Text":"Календарь","Group":"","IconCss":"icon-calendar","Return":"daytracker_calendar_0"}],"ActionZone":[{"Text":"Новая задача","IconCss":"icon-plus-sign","Return":"tasks_upsert_0"}],"Filters":{"Columns":{"Название":"like:TaskName","Приоритет":"PriorityID","Статус":"TaskStatusID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"AppointDate","Navigates":[{"PageId":"taskView","Arg":"TaskID","Column":"TaskName","NavByColumn":true}]},{"Table":"Task","HFilter":{"Elements":[{"Column":"ResponsibleID","Values":["%user.ContactPersonID%"]}]},"PartByDisplay":"TaskStatusID","PartBy":"TaskStatusID - TaskStatus.TaskStatusID","ExcludedColumns":["TaskText","ResponsibleID"],"Filters":{"Columns":{"Название":"like:TaskName","Приоритет":"PriorityID","Статус":"TaskStatusID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"AppointDate","Actions":[{"Text":"Начать","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["1"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"StartDate":"%userdatetime%","TaskStatusID":"%val.2%"}}]},{"Text":"Продолжить","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["5"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"TaskStatusID":"%val.2%"}}]},{"Text":"Завершить","IsAlt":true,"IconCss":"icon-flag-checkered","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"CompleteDate":"%userdatetime%","TaskStatusID":"%val.3%"}}]},{"Text":"Возобновить","Group":"","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["3"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"CompleteDate":"%val.null%","TaskStatusID":"%val.2%"}}]},{"Text":"Приостановить","Group":"","IconCss":"icon-pause","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"TaskStatusID":"%val.5%"}}]}]},{"Table":"Task","HFilter":{"Elements":[{"Column":"ManagerID","Values":["%user.ContactPersonID%"]},{"Column":"ResponsibleID","Type":"!=","Values":[null]}]},"PartByDisplay":"TaskStatusID","PartBy":"TaskStatusID - TaskStatus.TaskStatusID","ExcludedColumns":["TaskText","ManagerID"],"ActionZone":[{"Text":"Новое поручение","IconCss":"icon-plus-sign","Return":"tasks_upsert_1"}],"Filters":{"Columns":{"Название":"like:TaskName","Приоритет":"PriorityID","Статус":"TaskStatusID","Ответственный":"ResponsibleID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"AppointDate","Actions":[{"Text":"Изменить","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Return":"tasks_upsert_1"}]}],"Upserts":[{"TableMain":"Task","Title":"Задача","Hidden":["AppointDate","ManagerID"],"Defaults":{"Task.PriorityID":"100","Task.ManagerID":"%user.ContactPersonID%"},"ServerData":{"TaskStatusID":"1"},"FkFilter":{"Task.ProjectID":"StatusID=2"},"Exclude":["CompleteDate","StartDate","TaskStatusID","ResponsibleID"]},{"TableMain":"Task","Title":"Поручение","ToMain":["ProjectTasks"],"Hidden":["AppointDate","ManagerID"],"Defaults":{"Task.PriorityID":"100","Task.ManagerID":"%user.ContactPersonID%"},"ServerData":{"TaskStatusID":"1"},"FkFilter":{"Task.ResponsibleID":{"Elements":[{"Column":"CommunicationContactID","Type":"!=","Values":["%user.ContactPersonID%"]}]}},"Exclude":["CompleteDate","StartDate","TaskStatusID"]}]},
                    {"Url":"/crm/{id}/task","Id":"taskView","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | Приоритет: {PriorityID} | Статус: {TaskStatusID}</span><h3>{TaskName}</h3>","Menu12":"Поставлена: {AppointDate} | Постановщик - {ManagerID}"}}},"Master":{"Table":"Task","HFilter":"TaskID=%0%"},"Tabs":[{"Title":"Счетчики времени","Items":["taskView_grid_0"]},{"Title":"Планировщик задачи","Items":["taskView_calendar_0"]},{"Title":"Треккеры","Items":["taskView_calendar_1"]}],"Calendars":[{"ClickActions":[{"Text":"Запланировать задачу","IconCss":"icon-calendar","Item":0,"Controls":{"taskView_upsert_1":{"ColVal":{"TaskScheduler.TaskID":"%0%"}}}}],"Data":{"defaultView":"month","header":{"right":""}},"Items":[{"Table":"TaskScheduler","ColumnBegin":"StartTime","ColumnEnd":"FinishTime","HFilter":"TaskID=%url.0%","Format":"{TaskID}","EventParams":{"color":"StatusID - Color","allDay":"AllDay"},"Params":{"editable":true},"ClickEvents":[{"Text":"Изменить","IconCss":"icon-pencil","Return":"taskView_upsert_1"},{"Text":"Удалить","IconCss":"icon-remove","Return":"taskView_upsert_1"}]},{"Table":"TimeTracker","ColumnBegin":"StartTime","ColumnEnd":"FinishTime","HFilter":"TaskID=%url.0%","Format":"{ActionName} - {TaskID}","Params":{"editable":false,"color":"green"}}]}],"Grids":[{"Table":"TimeTracker","HFilter":"TaskID=%url.0%","ExcludedColumns":["TaskID"],"ActionZone":[{"Text":"Запустить таймер","IconCss":"icon-time","Filter":"TaskStatusID=2","Controls":{"taskView_upsert_0":{"ColVal":{"TaskID":"%0%","StaffID":"%user.ContactPersonID%"}}}}],"Actions":[{"Text":"Завершить","IsAlt":true,"IconCss":"icon-flag-checkered","ServerSide":true,"Filter":"FinishTime=null","Items":[{"ActionType":"Update","SourceTable":"TimeTracker","TargetTable":"TimeTracker","Columns":{"FinishTime":"%userdatetime%"}}]}]}],"Actions":[{"Text":"Данные","Group":"","GroupIcon":"icon-th","IconCss":"icon-tasks","Controls":{"tasks_upsert_0":{"ColVal":{"":"%0%"}}}},{"Text":"Начать","Group":"","Filter":"TaskStatusID=1","IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"StartDate":"%userdatetime%","TaskStatusID":"%val.2%"}}]},{"Text":"Продолжить","Group":"","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["5"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"TaskStatusID":"%val.2%"}}]},{"Text":"Завершить","Group":"","IconCss":"icon-flag-checkered","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"CompleteDate":"%userdatetime%","TaskStatusID":"%val.3%"}}]},{"Text":"Возобновить","Group":"","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["3"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"CompleteDate":"%val.null%","TaskStatusID":"%val.2%"}}]},{"Text":"Приостановить","Group":"","IconCss":"icon-pause","Filter":{"Elements":[{"Column":"TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Task","TargetTable":"Task","Columns":{"TaskStatusID":"%val.5%"}}]}],"Upserts":[{"TableMain":"TimeTracker","Title":"Запустить таймер задачи","ServerData":{"StartTime":"%userdatetime%"},"Exclude":["StartTime","FinishTime"]},{"TableMain":"TaskScheduler","Defaults":{"TaskScheduler.StartTime":"%js.addmin('client',0)%","TaskScheduler.FinishTime":"%js.addmin('client',30)%","TaskScheduler.AllDay":"%ajax.allDay%"}},{"TableMain":"TimeTracker","Defaults":{"TimeTracker.StartTime":"%js.addmin('client',0)%","TimeTracker.FinishTime":"%js.addmin('client',30)%"}}]},
                    {"Url":"/crm/daytracker","Id":"daytracker","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Выполненные дела</h3>"}}},"Calendars":[{"Data":{"defaultView":"agendaDay"},"Items":[{"Table":"TimeTracker","ColumnBegin":"StartTime","ColumnEnd":"FinishTime","HFilter":"StaffID=%user.ContactPersonID%"}]}]},
                    {"Url":"/crm/projects","Id":"activeProjects","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Текущие проекты</h3>"}}},"Tabs":[{"Title":"В работе","Items":["activeProjects_grid_0"]},{"Title":"Ожидание","Items":["activeProjects_grid_1"]}],"Grids":[{"Table":"Project","HFilter":"StatusID=2","PartByDisplay":"ProductID - Product.ProjectTypeID","PartBy":"ProductID - Product.ProjectTypeID - ProjectType.SolutionOrder","PagingSize":50,"ColWidth":{"ProjectName":"50%"},"VisibleColumns":["ProjectName","RegisterDate","StatusID","PayerGroupID"],"Filters":{"Columns":{"Название":"like:ProjectName","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"PayerGroupID":3,"RegisterDate":4}},"Navigates":[{"PageId":"projectView","Arg":"ProjectID","Column":"ProjectName"}]},{"Table":"Project","HFilter":"StatusID<2","PartByDisplay":"ProductID - Product.ProjectTypeID","PartBy":"ProductID - Product.ProjectTypeID - ProjectType.SolutionOrder","Join":{"ProjectManagerStaffID":"StaffID"},"PagingSize":50,"ColWidth":{"ProjectName":"50%"},"VisibleColumns":["ProjectName","RegisterDate","StatusID","PayerGroupID"],"Filters":{"Columns":{"Название":"like:ProjectName","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"PayerGroupID":3,"RegisterDate":4}},"Navigates":[{"PageId":"projectView","Arg":"ProjectID","Column":"ProjectName"}]}]},
                    {"Url":"/crm/{id}/project","Id":"projectView","Settings":{"Header":{"Columns":"*"}},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | Открыт: {RegisterDate} | Статус: {StatusID}</span> <h3>{ProjectName}</h3>","Menu12":"Клиент: @Nav(\"{PayerGroupID}\", \"clientProfiles\", \"%Main.PayerGroupID%\") | Менеджер: {ProjectManagerStaffID} | @Wrap(Nav(\"{ProjectID - OrderDetail.OrderID}\", \"orderView\", \"%Main.ProjectID - OrderDetail.OrderID%\"), \"Заказ:\", \"\")"}}},"Master":{"Table":"Project","HFilter":"ProjectID=%0%","JoinCustom":{"ProjectID":["OrderDetail.OrderID"]},"CustomColumns":[{"Name":"IsFinishReady","DataType":"int","Sql":"case when (select count(*) from ProjectFlow pf where pf.ProjectID = [Project].[ProjectID]) > 0 and not exists(select ProjectFlowID from ProjectFlow pf where pf.ProjectID = [Project].[ProjectID] and FinishDate is null) then 1 else 0 end"}]},"Tabs":[{"Title":"Этапы проекта","Items":["projectView_grid_0"]},{"Title":"Документы","Items":["projectView_grid_5"]},{"Title":"Мои задачи","Items":["projectView_grid_1"]},{"Title":"Входящие задания","Items":["projectView_grid_2"]},{"Title":"Поручения","Items":["projectView_grid_3"]},{"Title":"Компании","Items":["projectView_grid_4"]},{"Title":"Трекер","Items":["projectView_calendar_0"]}],"Calendars":[{"Data":{"defaultView":"agendaWeek"},"Items":[{"Table":"TimeTracker","ColumnBegin":"StartTime","ColumnEnd":"FinishTime","HFilter":{"Elements":[{"Column":"TaskID","Query":{"Rows":0,"Column":"ProjectTasks.TaskID","Filter":{"Elements":[{"Column":"ProjectID","Url":"0"}]}}}]}}]}],"Grids":[{"Table":"ProjectFlow","HFilter":"ProjectID=%0%","PartByDisplay":"TaskStatusID","PartBy":"TaskStatusID - TaskStatusID","SortBy":"StartDate","ExcludedColumns":["ProjectID"],"ActionZone":[{"Text":"Новый этап","IconCss":"icon-plus-sign","Controls":{"projectView_upsert_1":{"ColVal":{"ProjectID":"%0%"}}}}],"Actions":[{"Text":"Изменить этап","Group":"","GroupIcon":"icon-bolt","IconCss":"icon-edit-sign","Controls":{"projectView_upsert_5":{"ColVal":{"ProjectFlowID":"%client%","ProjectID":"%0%"}}}},{"Text":"Удалить этап","Group":"","IconCss":"icon-remove","ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"ProjectFlow","TargetTable":"ProjectFlow","DeleteBy":"ProjectFlowID"}]},{"Text":"Начать","IsAlt":true,"IconCss":"icon-caret-right","Filter":"TaskStatusID=1","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectFlow","TargetTable":"ProjectFlow","Columns":{"StartDate":"%userdatetime%","TaskStatusID":"%val.2%"}},{"ActionParams":{"Method":"ProjectFlowStart"}}]},{"Text":"Завершить","IsAlt":true,"IconCss":"icon-flag-checkered","Filter":"TaskStatusID=2","ServerSide":true,"Items":[{"ActionParams":{"Method":"ProjectFlowFinish"}}]},{"Text":"Приостановить","Group":"","IconCss":"icon-pause","Filter":"TaskStatusID=2","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectFlow","TargetTable":"ProjectFlow","Columns":{"TaskStatusID":"%val.5%"}}]}]},{"Table":"ProjectTasks","Join":{"TaskID":"*"},"HFilter":"ProjectID=%0% and TaskID - ManagerID=%user.ContactPersonID% and TaskID - ResponsibleID=null","PartByDisplay":"TaskID - TaskStatusID","PartBy":"TaskID - TaskStatusID - TaskStatusID","ExcludedColumns":["ProjectID","TaskID"],"ActionZone":[{"Text":"Новая задача","IconCss":"icon-plus-sign","Return":"projectView_upsert_7"}],"Filters":{"Columns":{"Название":"like:TaskName","Приоритет":"PriorityID","Статус":"TaskStatusID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"AppointDate","Navigates":[{"PageId":"taskView","Arg":"TaskID","Column":"TaskName","NavByColumn":true}],"Actions":[{"Text":"Изменить","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"projectView_upsert_9":{"SubmitConf":{"Updates":["projectView_grid_1"]},"ColVal":{"ProjectTasks.ProjectID":"%0%","":"%client.TaskID%"}}}},{"Text":"Начать","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["1"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"StartDate":"%userdatetime%","TaskStatusID":"%val.2%","":"TaskID"}}]},{"Text":"Запустить таймер","IsAlt":true,"IconCss":"icon-time","Filter":{"Elements":[{"Column":"TaskStatusID","Values":["2"]}]},"Controls":{"taskView_upsert_0":{"ColVal":{"TaskID":"%client%","StaffID":"%user.ContactPersonID%"}}}},{"Text":"Продолжить","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["5"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"TaskStatusID":"%val.2%","":"TaskID"}}]},{"Text":"Завершить","IsAlt":true,"IconCss":"icon-flag-checkered","Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"CompleteDate":"%userdatetime%","TaskStatusID":"%val.3%","":"TaskID"}}]},{"Text":"Возобновить","Group":"","Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["3"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"CompleteDate":"%val.null%","TaskStatusID":"%val.2%","":"TaskID"}}]},{"Text":"Приостановить","Group":"","IconCss":"icon-pause","Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"TaskStatusID":"%val.5%","":"TaskID"}}]}]},{"Table":"ProjectTasks","Join":{"TaskID":["TaskName","PriorityID","ManagerID","AppointDate","Deadline","CompleteDate","TaskStatusID"]},"HFilter":{"Elements":[{"Column":"ProjectID","Url":"0"},{"Column":"TaskID - Task.ResponsibleID","Type":"=","Values":["%user.ContactPersonID%"]}]},"PartByDisplay":"TaskID - Task.TaskStatusID","PartBy":"TaskID - Task.TaskStatusID - TaskStatus.TaskStatusID","ExcludedColumns":["ProjectID","TaskID"],"Filters":{"Columns":{"Название":"like:TaskName","Приоритет":"PriorityID","Статус":"TaskStatusID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"AppointDate","Navigates":[{"PageId":"taskView","Arg":"TaskID","Column":"TaskName","NavByColumn":true}],"Actions":[{"Text":"Начать","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["1"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"StartDate":"%userdatetime%","TaskStatusID":"%val.2%","":"TaskID"}}]},{"Text":"Продолжить","IsAlt":true,"Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["5"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"TaskStatusID":"%val.2%","":"TaskID"}}]},{"Text":"Завершить","IsAlt":true,"IconCss":"icon-flag-checkered","Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"CompleteDate":"%userdatetime%","TaskStatusID":"%val.3%","":"TaskID"}}]},{"Text":"Возобновить","Group":"","Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["3"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"CompleteDate":"%val.null%","TaskStatusID":"%val.2%","":"TaskID"}}]},{"Text":"Приостановить","Group":"","IconCss":"icon-pause","Filter":{"Elements":[{"Column":"TaskID - Task.TaskStatusID","Type":"=","Values":["2"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProjectTasks","TargetTable":"Task","Columns":{"TaskStatusID":"%val.5%","":"TaskID"}}]}]},{"Table":"ProjectTasks","Join":{"TaskID":["TaskName","PriorityID","ResponsibleID","AppointDate","Deadline","CompleteDate","TaskStatusID"]},"HFilter":{"Elements":[{"Column":"ProjectID","Url":"0"},{"Column":"TaskID - Task.ManagerID","Type":"=","Values":["%user.ContactPersonID%"]},{"Column":"TaskID - Task.ResponsibleID","Type":"!=","Values":[null]}]},"PartByDisplay":"TaskID - Task.TaskStatusID","PartBy":"TaskID - Task.TaskStatusID - TaskStatus.TaskStatusID","ExcludedColumns":["ProjectID","TaskID"],"ActionZone":[{"Text":"Новое поручение","IconCss":"icon-plus-sign","Return":"projectView_upsert_8"}],"Filters":{"Columns":{"Название":"like:TaskName","Приоритет":"PriorityID","Статус":"TaskStatusID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"AppointDate","Navigates":[{"PageId":"taskView","Arg":"TaskID","Column":"TaskName","NavByColumn":true}],"Actions":[{"Text":"Изменить","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"projectView_upsert_10":{"ColVal":{"ProjectTasks.ProjectID":"%0%","":"%client%"}}}}]},{"Table":"OffshoreCompany","HFilter":{"Elements":[{"Column":"OffshoreCompanyID","Query":{"Rows":0,"Column":"OffshoreCompanyProjects.OffshoreCompanyID","Filter":{"Elements":[{"Column":"ProjectID","Url":"0"}]}}}]},"Grids":[{"Table":"OffshoreCompanyBankAccount","ExcludedColumns":["OffshoreCompanyID"]},{"Table":"OffshoreCompanyManagement","ExcludedColumns":["OffshoreCompanyID"]}]},{"Table":"Document","HFilter":"FolderID=%main.DefaultFolderID% and PathGuid=%main.PayerGroupID%","SortBy":"DocumentName","PagingSize":75,"VisibleColumns":["DocumentName","CreateDate","FileSize"],"ActionZone":[{"Text":"Добавить документ","IconCss":"icon-plus-sign","Controls":{"projectView_upsert_12":{"ColVal":{"PathGuid":"%main.PayerGroupID%","FolderID":"%main.DefaultFolderID%"}}}}],"Actions":[{"Text":"Изменить документ","Group":"","GroupIcon":"icon-bolt","IconCss":"icon-edit-sign","Return":"projectView_upsert_13"}]}],"Actions":[{"Text":"Данные","Group":"","GroupIcon":"icon-th","IconCss":"icon-tasks","Controls":{"projectView_upsert_0":{"ColVal":{"":"%0%"}}}},{"Text":"Группа проекта","Group":"","IconCss":"icon-sitemap","Controls":{"projectView_upsert_3":{"ColVal":{"ProjectID":"%0%"}}}},{"Text":"Папка проекта","Group":"","IconCss":"icon-folder-close","Controls":{"projectView_upsert_4":{"ColVal":{"ProjectID":"%0%"}}}},{"Text":"Создать компанию","Group":"","IconCss":"icon-plus-sign","Controls":{"projectView_upsert_6":{"ColVal":{"OwnerPayerGroupID":"%main.PayerGroupID%","OffshoreCompanyProjects.ProjectID":"%0%"}}}},{"Text":"Завершить проект","Group":"Status","GroupIcon":"icon-bolt","IconCss":"icon-flag-checkered","Filter":"IsFinishReady:int=1 and StatusID<3","ServerSide":true,"Items":[{"ActionParams":{"Method":"ProjectFinish"}}]}],"Upserts":[{"TableMain":"Project","Exclude":["IsTaskFormFilled","ProjectGroupID","StartDate","DefaultFolderID"],"TablesMany":[{"Table":"OffshoreCompanyProjects","RowView":"MultiSelect","Name":"Компании","Position":"after.Project.PayerGroupID"}],"SelectHelper":{"Project.ProductID":{"Return":{"id":"ProductID"},"ReturnType":"popover","Hierarchies":[{"TableName":"Practice","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Solution","Filter":"Visible=1","OrderBy":"Number"},{"TableName":"Product","PathFromPrev":"SolutionToProduct.ProductID","Filter":"Visible=1"}]}},"FkFilter":{"OffshoreCompanyProjects.OffshoreCompanyID":"OwnerPayerGroupID=%main.PayerGroupID%"}},{"TableMain":"ProjectFlow","Exclude":["ProjectFlowTemplateID","TaskStatusID","StartDate","FinishDate"],"ServerData":{"TaskStatusID":"1"},"Defaults":{"ProjectFlow.ResponsibleID":""},"ActionItems":[{"ActionParams":{"Method":"AddStepChangeOrder"}}]},{"TableMain":"ProjectFlow","Upserts":[{"TableMain":"ProjectFlowToResultDocument","FromMain":["Document"],"ActionOnly":true,"File":{},"CanAdd":true,"ActionItems":[{"ActionParams":{"Method":"SaveNewResultDocuments"}}],"Exclude":["UserID","ResultDocumentID","FileSize","Version","PathGuid","CreateDate"]}]},{"TableMain":"Project","TreeViews":[{"Table":"ProjectGroup","Initiator":"Project.ProjectGroupID","Display":"Replace","HFilter":"PayerGroupID=%main.PayerGroupID%"}],"Exclude":["ProjectName","ProductID","PayerGroupID","ProjectManagerStaffID","StatusID","IsTaskFormFilled","StartDate","RegisterDate","DefaultFolderID"]},{"TableMain":"Project","TreeViews":[{"Table":"DocumentFolder","Initiator":"Project.DefaultFolderID","Display":"Replace","HFilter":"PayerGroupID=%main.PayerGroupID%"}],"Exclude":["ProjectName","ProductID","PayerGroupID","ProjectManagerStaffID","StatusID","IsTaskFormFilled","StartDate","RegisterDate","ProjectGroupID"]},{"TableMain":"ProjectFlow","Exclude":["ProjectFlowTemplateID"]},{"TableMain":"OffshoreCompany","Title":"Данные компании","ToMain":["OffshoreCompanyProjects"],"FkFilter":{"OffshoreCompany.CorporateProviderID":{"Elements":[{"Column":"PayerGroupTypeID","Values":[7]}]},"OffshoreCompany.NomineeServiceProviderID":{"Elements":[{"Column":"PayerGroupTypeID","Values":[7]}]}}},{"TableMain":"Task","Title":"Новая задача","ToMain":["ProjectTasks"],"Hidden":["AppointDate","ManagerID"],"Defaults":{"Task.PriorityID":"100","Task.ManagerID":"%user.ContactPersonID%"},"ServerData":{"TaskStatusID":"1"},"Exclude":["CompleteDate","StartDate","TaskStatusID","ResponsibleID"],"Configuration":{"ColVal":{"ProjectTasks.ProjectID":"%0%"}}},{"TableMain":"Task","Title":"Новое поручение","ToMain":["ProjectTasks"],"Hidden":["AppointDate","ManagerID"],"Defaults":{"Task.PriorityID":"100","Task.ManagerID":"%user.ContactPersonID%"},"ServerData":{"TaskStatusID":"1"},"FkFilter":{"Task.ResponsibleID":{"Elements":[{"Column":"CommunicationContactID","Type":"!=","Values":["%user.ContactPersonID%"]}]}},"Exclude":["CompleteDate","StartDate","TaskStatusID"],"Configuration":{"ColVal":{"ProjectTasks.ProjectID":"%0%"}}},{"TableMain":"Task","Title":"Изменить задачу","Exclude":["CompleteDate","AppointDate","StartDate","TaskStatusID","ManagerID","ResponsibleID"]},{"TableMain":"ProjectTasks","Title":"Изменить поручение","FromMain":["Task"],"FkFilter":{"Task.ResponsibleID":{"Elements":[{"Column":"CommunicationContactID","Type":"!=","Values":["%user.ContactPersonID%"]}]}},"Exclude":["CompleteDate","AppointDate","StartDate","TaskStatusID","TaskID","ManagerID"]},{"TableMain":"TimeTracker","Title":"Добавить счёт времени","ServerData":{"StartTime":"%userdatetime%"},"Exclude":["StartTime","FinishTime"]},{"TableMain":"Document","Title":"Добавить документы","Exclude":["DocumentName","UserID","DocumentType","CreateDate","Version","FileSize"],"CustomColumns":[{"Name":"ProjectFlowID","FK":"ProjectFlow"}],"FkFilter":{"Document.ProjectFlowID":"ProjectID=%0%"},"Defaults":{"Document.IsEncrypted":"1"},"ActionOnly":true,"File":{"MaxCount":"50","Style":"Zone"},"ActionItems":[{"ActionParams":{"Method":"SaveD"}}]},{"TableMain":"Document"}]},
                    {"Url":"/crm/companies","Id":"offshoreList","Menus":{"0":["offshore"]},"Grids":[{"Table":"OffshoreCompany","ActionZone":[{"Text":"Новая компания","Group":"","IconCss":"icon-plus-sign","Return":"offshoreList_upsert_0"},{"Group":"","ToExcel":true}],"Actions":[{"Text":"","IconCss":"icon-pencil","Return":"offshoreList_upsert_0"}],"Filters":{"Columns":{"Наименование":"like:OffshoreCompanyName","Номер":"like:CompanyNumber","Статус":"OffshoreCompanyStatusID","Провайдер":{"link":"CorporateProviderID","FkFilter":"PayerGroupTypeID=7"}},"Beetwens":{"Продление":"NextAnnualPaymentDate"}},"PagingSize":30,"IsSortOn":true,"SortBy":"OffshoreCompanyName","ExcludedColumns":["IsShelfCompany","NomineeServiceProviderID"],"Navigates":[{"PageId":"offshoreView","Arg":"OffshoreCompanyID","Column":"OffshoreCompanyName"}]}],"Upserts":[{"TableMain":"OffshoreCompany","Title":"Данные компании","FkFilter":{"OffshoreCompany.CorporateProviderID":{"Elements":[{"Column":"PayerGroupTypeID","Values":[7]}]},"OffshoreCompany.NomineeServiceProviderID":{"Elements":[{"Column":"PayerGroupTypeID","Values":[7]}]}}}]},
                    {"Url":"/crm/{id}/company","Id":"offshoreView","Menus":{"0":["offshore"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'> Дата основания - {IncorporationDate}  |  №{CompanyNumber} | {OffshoreCompanyStatusID}</span> <h3>@Actions() {OffshoreCompanyName}</h3>","Menu12":"Клиент: @Nav(\"{OwnerPayerGroupID}\", \"clientProfiles\", \"%Main.OwnerPayerGroupID%\") | Провайдер - {CorporateProviderID} | {OffshoreJurisdictionID} | {AddressID}"}}},"Actions":[{"Text":"Данные компании","Group":"","GroupIcon":"icon-th","IconCss":"icon-pencil","Controls":{"offshoreView_upsert_3":{"ColVal":{"":"%0%"}}}},{"Text":"Добавить в состав","Group":"","IconCss":"icon-group","Controls":{"offshoreView_upsert_0":{"ColVal":{"OffshoreCompanyID":"%0%"}}}},{"Text":"Добавить банковский счёт","Group":"","IconCss":"icon-money","Controls":{"offshoreView_upsert_1":{"ColVal":{"OffshoreCompanyID":"%0%"}}}},{"Text":"Связать проекты","Group":"","IconCss":"icon-tasks","Controls":{"offshoreView_upsert_2":{"ColVal":{"":"%0%"}}}},{"Text":"Добавить событие","Group":"","IconCss":"icon-book","Controls":{"offshoreView_upsert_4":{"ColVal":{"OffshoreCompanyID":"%0%"}}}}],"Master":{"Table":"OffshoreCompany","HFilter":{"Elements":[{"Column":"OffshoreCompanyID","Url":"0"}]}},"Tabs":[{"Title":"Структура","Items":["offshoreView_grid_0"]},{"Title":"Банковские счета","Items":["offshoreView_grid_1"]},{"Title":"Содержание","Items":["offshoreView_grid_3"]},{"Title":"Отчётность","Items":["offshoreView_grid_4"]},{"Title":"Изменения","Items":["offshoreView_grid_5"]},{"Title":"Проекты","Items":["offshoreView_grid_2"]}],"Grids":[{"Table":"OffshoreCompanyManagement","HFilter":"OffshoreCompanyID=%0%","ColWidth":{"OffshoreCompanyManagementPositionID":"50%"},"Columns":{"Orders":{"OffshoreCompanyManagementPositionID":1}},"ExcludedColumns":["OffshoreCompanyID"]},{"Table":"OffshoreCompanyBankAccount","HFilter":"OffshoreCompanyID=%0%","ColWidth":{"BankPayerGroupID":"50%"},"ExcludedColumns":["OffshoreCompanyID"]},{"Table":"OffshoreCompanyProjects","Name":"OffshoreCompanyProjects_offshoreView","ExcludedColumns":["OffshoreCompanyID"],"Navigates":[{"PageId":"projectView","Arg":"ProjectID","Column":"ProjectID","NavByColumn":true}],"Join":{"ProjectID":["StatusID","RegisterDate"]},"ColWidth":{"ProjectID":"50%"},"HFilter":"OffshoreCompanyID=%0%","SortBy":"ProjectID - RegisterDate"},{"Table":"OffshoreCompanyLog","ExcludedColumns":["OffshoreCompanyID"],"HFilter":"OffshoreCompanyID=%0% and LogTypeID - OffshoreCompanyLogType.LogClass=1"},{"Table":"OffshoreCompanyLog","ExcludedColumns":["OffshoreCompanyID"],"HFilter":"OffshoreCompanyID=%0% and LogTypeID - OffshoreCompanyLogType.LogClass=2"},{"Table":"OffshoreCompanyLog","ExcludedColumns":["OffshoreCompanyID"],"HFilter":"OffshoreCompanyID=%0% and LogTypeID - OffshoreCompanyLogType.LogClass=3"}],"Upserts":[{"TableMain":"OffshoreCompanyManagement","AjaxOnly":true},{"TableMain":"OffshoreCompanyBankAccount","FkFilter":{"OffshoreCompanyBankAccount.BankPayerGroupID":{"Elements":[{"Column":"PayerGroupTypeID","Values":[8]}]}}},{"TableMain":"OffshoreCompany","Exclude":["OffshoreCompanyName","OffshoreJurisdictionID","CorporateProviderID","NomineeServiceProviderID","CompanyNumber","AddressID","IncorporationDate","NextAnnualPaymentDate","IsShelfCompany","OffshoreCompanyStatusID","OwnerPayerGroupID"],"FkFilter":{"OffshoreCompanyProjects.ProjectID":{"Elements":[{"Column":"PayerGroupID","Values":["%main.OwnerPayerGroupID%"]}]}},"TablesMany":[{"Table":"OffshoreCompanyProjects","Name":"Details","Position":"after.OffshoreCompany.OffshoreCompanyID","CanManualAdd":"True","MaxCountManual":5}]},{"TableMain":"OffshoreCompany","FkFilter":{"OffshoreCompany.CorporateProviderID":{"Elements":[{"Column":"PayerGroupTypeID","Values":["7"]}]},"OffshoreCompany.NomineeServiceProviderID":{"Elements":[{"Column":"PayerGroupTypeID","Values":["7"]}]}}},{"TableMain":"OffshoreCompanyLog","AjaxOnly":true}]},
                    {"Url":"/crm/{id}/offshore/edit","Id":"offshoreEdit","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title":"{OffshoreCompanyName}</h3></div>"}}}},
                    {"Url":"/crm/offshore/address","Id":"offshoreAddress","Menus":{"0":["offshore"]},"Grids":[{"Table":"OffshoreCompanyAddress","ActionZone":[{"Text":"Новый адрес","IconCss":"icon-plus-sign","Return":"offshoreAddress_upsert_0"}],"Actions":[{"Text":"","IconCss":"icon-edit-sign","Return":"offshoreAddress_upsert_0"}]}],"Upserts":[{"TableMain":"OffshoreCompanyAddress","Title":"Новый адрес","FkFilter":{"OffshoreCompanyAddress.CorporateProviderID":{"Elements":[{"Column":"PayerGroupTypeID","Values":[7]}]}}}]},
                    {"Url":"/crm/offshore/jur","Id":"offshoreJur","Menus":{"0":["offshore"]},"Grids":[{"Table":"OffshoreJurisdiction","PagingSize":30,"RowFkCounters":["OffshoreCompany"],"ActionZone":[{"Text":"Добавить юрисдикцию","IconCss":"icon-plus-sign","Return":"offshoreJur_upsert_0"}],"Actions":[{"Text":"","IconCss":"icon-edit-sign","Return":"offshoreJur_upsert_0"}]}],"Upserts":[{"TableMain":"OffshoreCompanyAddress","AjaxOnly":true}]},
                    {"__Docs___":"","Url":"/crm/docs/desktop","Id":"docpackageList","Menus":{"0":["docs"]},"Grids":[{"Table":"DocumentPackage","HFilter":{"Elements":[{"Column":"DocumentHolderID","Values":["%user.ContactPersonID%"]},{"Column":"DocumentPackageStatusID","Values":["1","2"]}]},"PartBy":"DocumentPackageStatusID","ActionZone":[{"Text":"Новый пакет","IconCss":"icon-plus-sign","Return":"docpackageList_upsert_0"}],"Actions":[{"Text":"Данные пакета","Group":"","IconCss":"icon-pencil","Return":"docpackageView_upsert_7"},{"Text":"Отложить","Group":"","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Values":["1"]}]},"IconCss":"icon-pause","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"DocumentPackage","TargetTable":"DocumentPackage","Columns":{"DocumentPackageStatusID":"%val.2%"}}]},{"Text":"В работу","Group":"","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Values":["2"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"DocumentPackage","TargetTable":"DocumentPackage","Columns":{"DocumentPackageStatusID":"%val.1%"}}]},{"Text":"Добавить новые документы","Group":"","IconCss":"icon-plus-sign","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["5"]}]},"Controls":{"docpackageView_upsert_5":{"Behavior":"Insert","TableMany":{"DefaultRows":[{"PageNumber":"1"}]},"ColVal":{"DocumentFlow.DocumentPackageID":"%0%","DocumentFlow.DocumentFlowTypeID":"100"}}}},{"Text":"Переложить пакет","Group":"","IconCss":"icon-inbox","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["3"]}]},"Controls":{"docpackageView_upsert_8":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"10"}}}},{"Text":"Слияние пакетов","Group":"","IconCss":"icon-exchange","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["5"]}]},"Controls":{"docpackageView_upsert_6":{"Vars":{"@packageId":"%client%"},"ColVal":{"DocumentPackageID":"%client%","DocumentFlowTypeID":"30"}}}},{"Text":"Личная передача","Group":"","IconCss":"icon-suitcase","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_3":{"ColVal":{"DocumentPackageID":"%client%","DocumentFlowTypeID":"51"}}}},{"Text":"Передача курьеру","Group":"","IconCss":"icon-truck","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_3":{"ColVal":{"DocumentPackageID":"%client%","DocumentFlowTypeID":"51"}}}},{"Text":"Потеря пакета","Group":"","IconCss":"icon-eye-close","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_1":{"ColVal":{"DocumentPackageID":"%client%","DocumentFlowTypeID":"66"}}}},{"Text":"Уничтожение пакета","Group":"","IconCss":"icon-trash","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_2":{"ColVal":{"DocumentPackageID":"%client%","DocumentFlowTypeID":"77"}}}}],"Filters":{"Columns":{"Название":"like:DocumentPackageName","Клиент":"ClientID","Место":"DocumentStorageID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"DocumentPackageName","ExcludedColumns":["DocumentHolderID","InheretedDocumentPackageID"],"Navigates":[{"PageId":"docpackageView","Arg":"DocumentPackageID","Column":"DocumentPackageName","NavByColumn":true}]}],"Upserts":[{"TableMain":"DocumentPackage","Title":"Сформировать пакет","ToMain":["DocumentFlow"],"FkFilter":{"DocumentPackage.DocumentStorageID":{"Elements":[{"Column":"DocumentHolderID","Values":["%user.ContactPersonID%"]}]}},"Defaults":{"DocumentPackage.DocumentHolderID":"%user.ContactPersonID%","DocumentPackage.DocumentPackageStatusID":"%val.1%","DocumentPackage.CreateDate":"%userdatetime%","DocumentPackage.DocumentStorageID":"","DocumentFlow.DocumentFlowText":"Сформирован пакет документов","DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.DocumentFlowTypeID":"%val.1%","DocumentFlow.FlowDate":"%userdatetime%"},"Configuration":{"TableMany":{"DefaultRows":[{"PageNumber":"1"}]}},"Hidden":["DocumentHolderID","DocumentFlow.DocumentFlowTypeID","DocumentFlow.StaffID"],"Exclude":["InheretedDocumentPackageID"],"Width":"700px","TablesMany":[{"Table":"DocumentPaper","NameTop":true,"ShowHeader":true,"ColWidth":["85%","80px"],"Hidden":["DocumentCardID"],"Name":"Состав пакета","Position":"after.DocumentPackage.DocumentPackageName","CanManualAdd":"True","MaxCountManual":50}],"ActionItems":[{"ActionParams":{"Method":"DocumentPaperFlowSet"}}]}]},
                    {"Url":"/crm/docs/{id}/documentpackage","Id":"docpackageView","Menus":{"0":["docs"]},"Settings":{"Header":{"Columns":"*"}},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | Сформирован: {CreateDate} | Статус: {DocumentPackageStatusID}</span> <h3>{DocumentPackageName}</h3>","Menu12":"Клиент: @Nav(\"{ClientID}\", \"clientProfiles\", \"%Main.ClientID%\") | Держатель: {DocumentHolderID}"}}},"Master":{"Table":"DocumentPackage","HFilter":{"Elements":[{"Column":"DocumentPackageID","Url":"0"}]}},"Tabs":[{"Title":"Состав пакета","Items":["docpackageView_grid_0"]},{"Title":"Хронология операций","Items":["docpackageView_grid_1"]}],"Grids":[{"Table":"DocumentPaper","HFilter":{"Elements":[{"Column":"DocumentPackageID","Url":"0"}]},"EditableColumns":["DocumentPaperName","PageNumber"],"ExcludedColumns":["DocumentPackageID"],"ColWidth":{"PageNumber":"100px"},"Columns":{"Orders":{"PageNumber":2}},"SortBy":"DocumentPaperName","ActionZone":[{"Text":"Переложить в другой пакет","Group":"","GroupIcon":"icon-th","MultiRow":true,"IconCss":"icon-exchange","Controls":{"docpackageView_upsert_6":{"Vars":{"@packageId":"%0%"},"TitleInsert":"Переложить в другой пакет","ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"110"}}}},{"Text":"Потеря части документов","Group":"","GroupIcon":"icon-th","MultiRow":true,"IconCss":"icon-eye-close","Controls":{"docpackageView_upsert_4":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"160"}}}}]},{"Table":"DocumentFlow","HFilter":{"Elements":[{"Column":"DocumentPackageID","Url":"0"}]},"JoinCustom":{"DocumentFlowID":["DocumentMovement.*"]},"ExcludedColumns":["DocumentPackageID","DocumentMovement.DocumentFlowID","DocumentMovement.DocumentHolderID","DocumentMovement.DocumentStorageID"],"EditableColumns":["DocumentFlowText","FlowDate"],"ColWidth":{"FlowDate":"1%","DocumentFlowTypeID":"1%","StaffID":"1%"},"CustomColumns":[{"Name":"Documents","Sql":" 'ee' "}],"CellFormat":{"Documents":"{DocumentFlowID - DocumentMovement.DocumentStorageID} @SubGrids"},"SubGridShow":false,"Columns":{"Orders":{"Documents":3}},"Grids":[{"Table":"DocumentFlowPapers","ExcludedColumns":["DocumentFlowID"],"Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"{DocumentPaperID}"}}}}],"Filters":{"Columns":{"Город":"TaskID - Task.CommunicationContactID","Название":"like:TaskID - Task.TaskName"}},"PagingSize":30,"IsSortOn":true,"SortBy":"FlowDate"}],"Actions":[{"Text":"Данные","Group":"","GroupIcon":"icon-th","IconCss":"icon-pencil","Controls":{"docpackageView_upsert_7":{"ColVal":{"":"%0%"}}}},{"Text":"Добавить новые документы","Group":"","IconCss":"icon-plus-sign","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["5"]}]},"Controls":{"docpackageView_upsert_5":{"Behavior":"Insert","TableMany":{"DefaultRows":[{"PageNumber":"1"}]},"ColVal":{"":"%0%","DocumentFlow.DocumentFlowTypeID":"100"}}}},{"Text":"Слияние пакетов","Group":"","IconCss":"icon-exchange","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["5"]}]},"Controls":{"docpackageView_upsert_6":{"Vars":{"@packageId":"%0%"},"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"30"}}}},{"Text":"Переложить пакет","Group":"","IconCss":"icon-inbox","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["3"]}]},"Controls":{"docpackageView_upsert_8":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"10"}}}},{"Text":"Передать в архив","Group":"","IconCss":"icon-archive","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["3"]}]},"Controls":{"docpackageView_upsert_9":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"52"}}}},{"Text":"Личная передача","Group":"","IconCss":"icon-suitcase","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_3":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"51"}}}},{"Text":"Передача курьеру","Group":"","IconCss":"icon-truck","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_3":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"51"}}}},{"Text":"Потеря пакета","Group":"","IconCss":"icon-eye-close","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_1":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"66"}}}},{"Text":"Уничтожение пакета","Group":"","IconCss":"icon-trash","Filter":{"Elements":[{"Column":"DocumentPackageStatusID","Type":"<","Values":["40"]}]},"Controls":{"docpackageView_upsert_2":{"ColVal":{"DocumentPackageID":"%0%","DocumentFlowTypeID":"77"}}}}],"Upserts":[{"TableMain":"DocumentPackage","Title":"Данные пакета","Hidden":["DocumentHolderID"],"Exclude":["InheretedDocumentPackageID"],"Width":"700px","TablesMany":[{"Table":"DocumentPaper","NameTop":true,"ShowHeader":true,"ColWidth":["85%","80px"],"Hidden":["DocumentCardID"],"Name":"Состав пакета","Position":"after.DocumentPackage.DocumentPackageName"}]},{"TableMain":"DocumentFlow","Title":"Потеря пакета","Defaults":{"DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["StaffID"],"ActionItems":[{"ActionType":"Update","SourceTable":"DocumentFlow","TargetTable":"DocumentPackage","Columns":{"DocumentPackageStatusID":"%val.42%","DocumentHolderID":"%val.null%","":"%0%"}}]},{"TableMain":"DocumentFlow","Title":"Уничтожение пакета","Defaults":{"DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["StaffID"],"ActionItems":[{"ActionType":"Update","SourceTable":"DocumentFlow","TargetTable":"DocumentPackage","Columns":{"DocumentPackageStatusID":"%val.41%","DocumentHolderID":"%val.null%","":"%0%"}}]},{"TableMain":"DocumentFlow","Title":"Личная передача пакета","Defaults":{"DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["StaffID"],"CustomColumns":[{"Name":"Holder","FK":"DocumentHolder"}],"FkFilter":{"DocumentFlow.Holder":{"Elements":[{"Column":"PayerGroupID","Values":["%main.ClientID%"]}]}},"ActionItems":[{"ActionParams":{"Method":"DocPackMove"}}]},{"TableMain":"DocumentFlow","Title":"Потеря документов","Defaults":{"DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["StaffID"],"ActionItems":[{"ActionParams":{"Method":"DocumentPaperRemove"}}]},{"TableMain":"DocumentPackage","Title":"Добавить новые документы","ToMain":["DocumentFlow"],"Exclude":["CreateDate","DocumentPackageStatusID","ClientID","DocumentHolderID","DocumentStorageID","InheretedDocumentPackageID"],"Defaults":{"DocumentPackage.DocumentPackageName":"any text to make upsert working, it needed at least one field from TableMain","DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["DocumentPackageName","DocumentFlow.StaffID"],"ActionItems":[{"ActionParams":{"Method":"DocumentPaperNewInsert"}}],"ActionOnly":true,"Width":"700px","TablesMany":[{"Table":"DocumentPaper","NameTop":true,"ShowHeader":true,"ColWidth":["85%","80px"],"Hidden":["DocumentCardID"],"Name":"Состав пакета","Position":"after.DocumentPackage.DocumentPackageName","CanManualAdd":true}]},{"TableMain":"DocumentFlow","Title":"Слияние с пакетом","CustomColumns":[{"Name":"TransferPackageID","FK":"DocumentPackage","IsNull":false}],"Defaults":{"DocumentFlow.TransferPackageID":"","DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["StaffID"],"FkFilter":{"DocumentFlow.TransferPackageID":{"Elements":[{"Column":"DocumentPackageID","Type":"!=","Values":["%@packageId%"]},{"Column":"DocumentHolderID","Values":["%user.ContactPersonID%"]}]}},"ActionItems":[{"ActionParams":{"Method":"DocumentPaperTransfer"}}]},{"TableMain":"DocumentPackage","Title":"Данные пакета","Hidden":["DocumentHolderID"],"Exclude":["InheretedDocumentPackageID","DocumentPackageStatusID","CreateDate"]},{"TableMain":"DocumentFlow","Title":"Изменение места хранения","Defaults":{"DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.Storage":"","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["StaffID"],"CustomColumns":[{"Name":"Storage","FK":"DocumentStorage"}],"FkFilter":{"DocumentFlow.Storage":{"Elements":[{"Column":"DocumentHolderID","Values":["%main.DocumentHolderID%"]},{"Column":"DocumentStorageID","Type":"!=","Values":["%main.DocumentStorageID%"]}]}},"ActionItems":[{"ActionParams":{"Method":"DocChangeStorage"}}]},{"TableMain":"DocumentFlow","Title":"Передача пакета в архив","Defaults":{"DocumentFlow.StaffID":"%user.ContactPersonID%","DocumentFlow.FlowDate":"%userdatetime%"},"Hidden":["StaffID"],"CustomColumns":[{"Name":"Holder","FK":"DocumentHolder"},{"Name":"Storage","FK":"DocumentStorage"}],"ToRequest":{"DocumentFlow.Holder":["DocumentHolderID"]},"FkFilter":{"DocumentFlow.Holder":{"Elements":[{"Column":"DocumentHolderTypeID","Values":["2"]}]},"DocumentFlow.Storage":{"Elements":[{"Column":"DocumentHolderID","Values":["%req.DocumentFlow.DocumentHolderID%"]}]}},"ActionItems":[{"ActionParams":{"Method":"DocPackMove"}}]}]},
                    {"Url":"/crm/docs/mystorage","Id":"mystoragelist","Menus":{"0":["docs"]},"Grids":[{"Table":"DocumentStorage","HFilter":{"Elements":[{"Column":"DocumentHolderID","Values":["%user.ContactPersonID%"]}]},"EditableColumns":["DocumentStorageName"],"RowFkCounters":["DocumentPackage"],"ColWidth":{"DocumentPackageDocumentStorageID_Count":"100px"},"PagingSize":30,"ActionZone":[{"Text":"Добавить место","IconCss":"icon-plus-sign","Return":"mystoragelist_upsert_0"}],"Actions":[{"Text":"Удалить место","Group":"","IconCss":"icon-remove","Filter":{"Elements":[{"Column":"DocumentPackageDocumentStorageID_Count","Values":["0"]}]},"ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"DocumentStorage","TargetTable":"DocumentStorage","DeleteBy":"DocumentStorageID"}]}]}],"Upserts":[{"TableMain":"DocumentStorage","Title":"Добавить место","Configuration":{"ColVal":{"DocumentHolderID":"%user.ContactPersonID%"}}}]},
                    {"Url":"/crm/docs/ourarchive","Id":"ourarchivelist","Menus":{"0":["docs"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Архивы компании</h3>"}}},"HierarchicalTreeViews":[{"Table":"DocumentHolder","SelfRelation":true,"HFilter":{"Elements":[{"Column":"DocumentHolderTypeID","Values":["2"]}]},"Data":{"icon":"icon-archive"},"RowCount":0,"Actions":[{"Text":"Редактировать архив","Group":"","IconCss":"icon-pencil","Return":"ourarchivelist_upsert_0"},{"Text":"Добавить архивный блок","Group":"","IconCss":"icon-inbox","Controls":{"ourarchivelist_upsert_1":{"ColVal":{"DocumentHolderID":"%client%"}}}}],"Items":[{"Table":"DocumentStorage","RowCount":0,"AllowParentNull":true,"Data":{"icon":"icon-inbox"},"Actions":[{"Text":"Редактировать","Group":"","IconCss":"icon-pencil","Return":"ourarchivelist_upsert_1"}]}]}],"Upserts":[{"TableMain":"DocumentHolder","Title":"Редактировать архив","Exclude":["DocumentHolderTypeID","PayerGroupID"]},{"TableMain":"DocumentStorage","Title":"Архивный блок","Hidden":["DocumentHolderID"]}]},
                    { "Url": "/crm/{pgid}/desktop/{fid}","Id": "docsList","TemplateConfig": {"PageTemplate":{"LineFormat":{"Title12":"<h3>Документы @Nav(\"{PayerGroupName}\", \"clientProfiles\", \"%Url.0%\")</h3>","Menu12":"@BreadCrumb(\"DocumentFolder\", 1, \"ParentFolderID\")"}}},"Master": {"Table":"PayerGroup","HFilter":"PayerGroupID=%0%"},"Actions": [{"Text":"Новая папка","IconCss":"icon-plus-sign","Controls":{"docsList_upsert_2":{"ColVal":{"ParentFolderID":"null","PayerGroupID":"%0%"}}}},{"Text":"Новый документ","IconCss":"icon-plus-sign","Return":"docsList_upsert_1"}],"HierarchicalTreeViews": [{"Table": "DocumentFolder","DeferredLoading": true,"SelfRelation": true,"HFilter": "PayerGroupID=%0%","Data": {"icon":"icon-folder-close-alt"},"RowCount": 0,"Actions": [{"Type":"Edit","Group":"","Text":"Edit Folder"},{"Type":"Add","Group":"","IconCss":"icon-plus-sign","Text":"Add","ColVal":{"PayerGroupID":"%main.PayerGroupID%"}},{"Type":"Add","Group":"","Text":"Add File","Table":"Document"},{"Text":"Новая папка","Group":"","IconCss":"icon-plus-sign","Controls":{"docsList_upsert_2":{"ColVal":{"ParentFolderID":"%client%","PayerGroupID":"%0%"}}}},{"Text":"Редактировать","Group":"","IconCss":"icon-pencil","Controls":{"docsList_upsert_0":{"ColVal":{"PayerGroupID":"%0%"}}}},{"Text":"Залить файл","Group":"","IconCss":"icon-upload","Controls":{"docsList_upsert_1":{"ColVal":{"FolderID":"%client%"}}}}],"Items": [{"Table":"Document","RowCount":0,"AllowParentNull":true,"HFilter":"PathGuid=%0%","Data":{"icon":"icon-file-text-alt"},"Actions":[{"Text":"Редактировать","Group":"","IconCss":"icon-pencil","Return":"docsList_upsert_1"}]}]}],"Upserts": [{"TableMain":"DocumentFolder","TreeViews":[{"Table":"DocumentFolder","Initiator":"DocumentFolder.ParentFolderID","Display":"Replace","HFilter":"PayerGroupID=%0% and FolderID!=%upsertpk%"}]},{"TableMain":"Document","ColumnsView":[{"Name":"DocumentName","NameAlign":"top"}],"File":{},"TreeViews":[{"Table":"DocumentFolder","Initiator":"Document.FolderID","Display":"Replace","HFilter":"PayerGroupID=%0%"}],"Exclude":["UserID","FileSize","Version","PathGuid","CreateDate","DocumentType"]},{"TableMain":"DocumentFolder"}]},
                    {"Url":"/crm/{pgid}/desktop2/{fid}","Id":"docsList2","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Документы @Nav(\"{PayerGroupName}\", \"clientProfiles\", \"%Url.0%\")</h3>","Menu12":"@BreadCrumb(\"DocumentFolder\", 1, \"ParentFolderID\")"}}},"Main":{"Table":"PayerGroup","Filter":{"Elements":[{"Column":"PayerGroupID","Url":"0"}]}},"Grids":[{"Table":"DocumentFolder","HideTitle":true,"ActionZone":[{"Text":"Новая папку","IconCss":"icon-plus-sign","Return":"docsList2_upsert_0"},{"Text":"Новый документ","IconCss":"icon-plus-sign","Return":"docsList2_upsert_1"}],"ExcludedColumns":["PayerGroupID","ParentFolderID"],"HFilter":{"Elements":[{"Column":"PayerGroupID","Values":["%Url.0%"]},{"Column":"ParentFolderID","Values":["%Url.1%"]}]},"Navigates":[{"PageId":"docsList","Args":{"pgid":"%Url.0%","fid":"FolderID"},"Column":"Name"}]},{"Table":"Document","HideTitle":true,"EditableColumns":["DocumentName"],"HFilter":{"Elements":[{"Column":"PathGuid","Values":["%Url.0%"]},{"Column":"FolderID","Values":["%Url.1%"]}]},"Actions":[{"Text":"","IconCss":"icon-edit","Return":"docsList2_upsert_1"}],"ExcludedColumns":["FolderID","PathGuid","DocumentType","Version","IsEncrypted"]}],"Upserts":[{"TableMain":"DocumentFolder","Configuration":{"ColVal":{"PayerGroupID":"%0%","ParentFolderID":"%1%"}}},{"TableMain":"Document","TreeViews":[{"Table":"DocumentFolder","Initiator":"Document.FolderID","Display":"Replace","HFilter":{"Elements":[{"Column":"PayerGroupID","Values":["%Url.0%"]}]}}],"Exclude":["UserID","FileSize","Version","PathGuid","CreateDate","DocumentType"]}]},
                    {"__Finance__":"","Url":"/crm/finance/cashaccounts","Id":"cashAccounts","Grids":[{"Table":"CashAccount","PartByDisplay":"CurrencyID","PartBy":"CurrencyID - Currency.CurrencyID","PagingSize":0,"ColWidth":{"CashAccountName":"40%"},"ExcludedColumns":["isActiveAccount","isBillAccount","isCalculate","SegmentID","CashAccountDetail"],"HFilter":"isActiveAccount=1 and PayerID - PayerGroupID - PayerGroupTypeID=1","Filters":{"Columns":{"Название":"like:CashAccountName","Валюта":"CurrencyID","Тип":"CashAccountTypeID","Банк":{"link":"BankID","FkFilter":"PayerGroupTypeID=8"}}},"Navigates":[{"PageId":"cashes","Arg":"CashAccountID","Column":"CashAccountName"}],"ActionZone":[{"Text":"Новый счет","Group":"","GroupIcon":" icon-cloud-download","IconCss":"icon-plus-sign","Return":"cashAccounts_upsert_0"}],"Actions":[{"Text":"Входящий","Group":"Flow","GroupIcon":"icon-bolt","IconCss":"icon-circle-arrow-down ","Controls":{"cashes_upsert_0":{"ColVal":{"CashAccountID":"%client%"}}}},{"Text":"Исходящий","Group":"Flow","IconCss":"icon-circle-arrow-up","Controls":{"cashes_upsert_1":{"ColVal":{"CashAccountID":"%client%"}}}},{"Text":"Перевод","Group":"Flow","IconCss":"icon-circle-arrow-right","Controls":{"cashAccounts_upsert_1":{"Behavior":"Insert","Defaults":{"CashFlow.CashAccountID":"%client%"}}}},{"Text":"Конвертация","Group":"Flow","IconCss":"icon-exchange","Controls":{"cashAccounts_upsert_2":{"Behavior":"Insert"}}},{"Text":"Редактирование","Group":"","GroupIcon":"icon-list-ul","IconCss":"icon-reorder","Return":"cashAccounts_upsert_0"},{"Text":"Удалить","IconCss":"icon-remove","Group":"","Title":"Delete","Items":[{"ActionType":"Delete","SourceTable":"CashAccount","TargetTable":"CashAccount","DeleteBy":"CashAccountID"}]}]}],"Upserts":[{"TableMain":"CashAccount","Title":"Данные счета","FkFilter":{"CashAccount.PayerID":"PayerGroupID - PayerGroupTypeID=1","CashAccount.BankID":"PayerGroupTypeID=8"}},{"TableMain":"CashFlow","Title":"Перечисление на счет","Exclude":["CashFlowTypeID","TargetID"],"ReadOnly":["CashFlow.CashAccountID"],"ColumnsView":[{"Name":"CashAccountID","Order":1}],"CustomColumns":[{"Name":"TargetAccountID","FK":"CashAccount"}],"FkFilter":{"CashFlow.TargetAccountID":{"Elements":[{"Column":"CurrencyID","Query":{"PK":"%client%"}},{"Column":"CashAccountID","Type":"!=","Values":["%client%"]},{"Column":"isActiveAccount","Values":["1"]},{"Column":"PayerID - Payer.PayerGroupID - PayerGroup.PayerGroupTypeID","Values":[1]}]}},"ActionOnly":true,"ActionItems":[{"ActionParams":{"Method":"CashFlowTransfer"}}]},{"TableMain":"CashFlow","Title":"Конвертация валюты","Exclude":["CashFlowTypeID","TargetID"],"Defaults":{"CashFlow.CashAccountID":"%client%"},"ReadOnly":["CashFlow.CashAccountID"],"ColumnsView":[{"Name":"CashAccountID","Order":1}],"CustomColumns":[{"Name":"CurrencyID","FK":"Currency","DataType":"tinyint"},{"Name":"TargetAccountID","FK":"CashAccount"},{"Name":"ConvertSum","DataType":"float"}],"ServerData":{"CashFlowTypeID":"212"},"FkFilter":{"CashFlow.TargetAccountID":{"Elements":[{"Column":"CurrencyID","Values":["%req.CashFlow.CurrencyID%"]},{"Column":"isActiveAccount","Values":["1"]},{"Column":"PayerID - Payer.PayerGroupID - PayerGroup.PayerGroupTypeID","Values":[1]}]}},"ActionOnly":true,"ActionItems":[{"ActionParams":{"Method":"CashFlowConvert"}}]}]},
                    {"Url":"/crm/{id}/cashflow","Id":"cashes","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>{PayerID} | Баланс: {CurrentSum} {%main.CurrencyID - CurrencySign%}</span><h3>{CashAccountName}</h3>"}}},"Master":{"Table":"CashAccount","Join":{"CurrencyID":["CurrencySign"]},"HFilter":{"Elements":[{"Column":"CashAccountID","Url":"0"}]}},"Grids":[{"Table":"CashFlow","HideTitle":true,"Columns":{"Orders":{"PaymentDate":1,"PaymentComment":6}},"ExcludedColumns":["CashAccountID","UserID","TargetID","Sum"],"PagingSize":100,"SortBy":"PaymentDate","Filters":{"Columns":{"Сумма":"like:Sum","Детали":"like:PaymentComment","Тип":"CashFlowTypeID"},"Beetwens":{"Дата":"PaymentDate"}},"ActionZone":[{"Text":"Входящий платёж","Group":"Flow","GroupIcon":"icon-bolt","IconCss":"icon-circle-arrow-down","Controls":{"cashes_upsert_0":{"ColVal":{"CashAccountID":"%0%"}}}},{"Text":"Исходящий платёж","Group":"Flow","IconCss":"icon-circle-arrow-up","Controls":{"cashes_upsert_1":{"ColVal":{"CashAccountID":"%0%"}}}},{"Text":"Перечисление на счет","Group":"Flow","IconCss":"icon-circle-arrow-right","Controls":{"cashAccounts_upsert_1":{"Behavior":"Insert","ColVal":{"CashAccountID":"%0%"}}}},{"Text":"Конвертация валюты","Group":"Flow","IconCss":"icon-exchange","Controls":{"cashAccounts_upsert_2":{"Behavior":"Insert","ColVal":{"CashAccountID":"%0%"}}}},{"Text":"Данные счета","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-reorder","Controls":{"cashAccounts_upsert_0":{"ColVal":{"":"%0%"}}}}],"Actions":[{"Text":"Изменить проводку","Group":"","IconCss":"icon-reorder","Controls":{"cashes_upsert_2":{"ColVal":{"":"%client%","CashFlowTypeOldID":"%client.CashFlowTypeID%","CashAccountID":"%0%"}}}},{"Text":"Удалить проводку","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-remove","ServerSide":true,"Items":[{"ActionParams":{"Method":"CashFlowRemove"}}]}],"HFilter":{"Elements":[{"Column":"CashAccountID","Values":["%Url.0%"]}]}}],"Upserts":[{"TableMain":"CashFlow","Title":"Входящий платеж","Exclude":["TargetID"],"ActionItems":[{"ActionParams":{"Method":"CashFlowInput"}}],"FkFilter":{"CashFlow.CashFlowTypeID":{"Elements":[{"Column":"isIncome","Values":["1"]},{"Column":"isLinkedCF","Values":["0"]}]}}},{"TableMain":"CashFlow","Title":"Исходящий платеж","Exclude":["TargetID"],"ActionItems":[{"ActionParams":{"Method":"CashFlowOutput"}}],"FkFilter":{"CashFlow.CashFlowTypeID":{"Elements":[{"Column":"isIncome","Values":["0"]},{"Column":"isLinkedCF","Values":["0"]}]}}},{"TableMain":"CashFlow","Title":"Изменить проводку","Exclude":["TargetID"],"CustomColumns":[{"Name":"CashFlowTypeOldID","DataType":"int"}],"FkFilter":{"CashFlow.CashFlowTypeID":{"Elements":[{"Column":"isIncome","Query":{"PK":"%req.CashFlow.CashFlowTypeOldID%"}}]}}}]},
                    {"Url":"/crm/finance/procurementrequests","Id":"procurementrequestsList","Grids":[{"Table":"ProcurementRequest","PartByDisplay":"ProcurementRequestStatusID","PartBy":"ProcurementRequestStatusID - ProcurementRequestStatus.ProcurementRequestStatusID","ActionZone":[{"Text":"Проект заявки","Group":"","IconCss":"icon-plus-sign","Return":"procurementrequestsList_upsert_0"},{"Group":"","ToExcel":true}],"Filters":{"Columns":{"Заявка":"like:ProcurementRequestName","Сотрудник":"ApplicantStaffID","Статус":"ProcurementRequestStatusID"}},"PagingSize":30,"IsSortOn":true,"SortBy":"RequestDate","Actions":[{"Text":"Изменить заявку","Group":"","IconCss":"icon-pencil","Return":"procurementrequestsList_upsert_0"},{"Text":"Направить заявку","Group":"","Filter":{"Elements":[{"Column":"ProcurementRequestStatusID","Type":"=","Values":["0"]}]},"IconCss":"icon-caret-right","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProcurementRequest","TargetTable":"ProcurementRequest","Columns":{"RequestDate":"%userdatetime%","ProcurementRequestStatusID":"%val.1%"}}]},{"Text":"Одобрить заявку","Group":"","Filter":{"Elements":[{"Column":"ProcurementRequestStatusID","Type":"=","Values":["1"]}]},"IconCss":"icon-flag","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProcurementRequest","TargetTable":"ProcurementRequest","Columns":{"ProcurementRequestStatusID":"%val.10%"}}]},{"Text":"Отклонить заявку","Group":"","Filter":{"Elements":[{"Column":"ProcurementRequestStatusID","Type":"=","Values":["1"]}]},"IconCss":"icon-remove-sign","ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"ProcurementRequest","TargetTable":"ProcurementRequest","Columns":{"ProcurementRequestStatusID":"%val.99%"}}]}]}],"Upserts":[{"TableMain":"ProcurementRequest","Title":"Данные заявки на закупку","Exclude":["ApprovedDate","ProcurementRequestStatusID"],"Hidden":["RequestDate","ApplicantStaffID"],"Defaults":{"ProcurementRequest.ApplicantStaffID":"%user.ContactPersonID%"},"ServerData":{"ProcurementRequestStatusID":"0"},"Width":"600px","TablesMany":[{"Table":"ProcurementRequestDetail","NameTop":true,"ShowHeader":true,"ColWidth":["100%","100px"],"Hidden":["ApprovedQuantity","IsApproved"],"Name":"Позиции заявки","Position":"after.ProcurementRequest.RequestDate","CanManualAdd":"True","MaxCountManual":50}]}]},
                    {"__HR__":"","Url":"/crm/hr/absence","Id":"staffabsence","Grids":[{"Table":"StaffAbsence","Columns":{"Orders":{"StaffID":2}},"ActionZone":[{"Text":"Добавить отсутствие","IconCss":"icon-plus-sign","Return":"staffabsence_upsert_0"}],"Actions":[{"Text":"","IconCss":"icon-edit","Return":"staffabsence_upsert_0"}]}],"Upserts":[{"TableMain":"StaffAbsence","AjaxOnly":true}]},
                    {"Url":"/crm/hr/staff","Id":"hrStaff","Grids":[{"Name":"StaffGrid","Table":"ContactPerson","JoinOneToOne":["Staff.StaffPositionID"],"JoinCustom":{"ContactPersonID":["CommunicationContact.CommunicationContactID"]},"ExcludedColumns":["PayerGroupID","ContactName","ContactSurname","ContactSecondName","isFemale","BirthDay","ContactDate","Commentary","isForContacts","isStaff","isUser","CommunicationContact.CommunicationContactID"],"Filters":{"Columns":{"Фамилия":"like:ContactSurname"}},"VisibleColumns":["ShortName","ContactPosition"],"ActionZone":[{"Text":"Новый сотрудник","IconCss":"icon-plus-sign","Controls":{"hrStaff_upsert_0":{"Behavior":"Insert","TableMany":{"DefaultRows":[{"CPDetailsTypeID":"11"},{"CPDetailsTypeID":"22"}]},"ColVal":{"PayerGroupID":"%const.zbid%"}}}}],"Actions":[{"Text":"Изменить данные","Group":"","IconCss":"icon-pencil","Return":"hrStaff_upsert_0"},{"Text":"Права доступа","Group":"","IconCss":"icon-group","Return":"clientProfiles_upsert_3"},{"Text":"Открыть для коммуникаций","Filter":{"Elements":[{"Column":"ContactPersonID - CommunicationContact.CommunicationContactID","Validate":false,"Values":[null]}]},"Group":"","IconCss":"icon-phone","ServerSide":true,"Items":[{"ActionType":"Insert","SourceTable":"ContactPerson","TargetTable":"CommunicationContact","Columns":{"CommunicationContactID":"ContactPersonID","ContactName":"ShortName","CommunicationContactType":"%val.1%"}}]}],"HFilter":{"Elements":[{"Column":"PayerGroupID - PayerGroup.PayerGroupTypeID","Values":[1]}]}}],"Upserts":[{"TableMain":"Staff","Title":"Данные сотрудника","Width":"800px","FkFilter":{"ContactDetails.CPDetailsTypeID":"fCP=1"},"TablesMany":[{"Table":"ContactDetails","Name":"Телефоны","Position":"after.ContactPerson.ContactDate","CanManualAdd":"True","MaxCountManual":50}],"FromMain":["ContactPerson"],"Exclude":["isUser"],"Hidden":["ContactPerson.isStaff","ContactPerson.isForContacts","ContactPerson.ContactDate","ContactPerson.PayerGroupID"],"Defaults":{"ContactDetails.CPDetailsTypeID":"","ContactPerson.ContactDate":"%userdatetime%","ContactPerson.isStaff":"1","ContactPerson.ContactName":"%user.ContactPersonID - PayerGroupID - PayerGroupName%"}}]},
                    {"Url":"/crm/workgroups","Id":"projectsWorkgroup","Grids":[{"Table":"WorkGroup","JoinCustom":{"WorkGroupID":["CommunicationContact.CommunicationContactID"]},"ExcludedColumns":["CommunicationContact.CommunicationContactID"],"ActionZone":[{"Text":"Новая рабочая группа","IconCss":"icon-plus-sign","Return":"projectsWorkgroup_upsert_0"}],"Actions":[{"Text":"","IconCss":"icon-group","Return":"projectsWorkgroup_upsert_0"},{"Text":"Открыть для коммуникаций","Filter":"WorkGroupID - CommunicationContact.CommunicationContactID!=  null","IconCss":"icon-phone","Group":"","ServerSide":true,"Items":[{"ActionType":"Insert","SourceTable":"WorkGroup","TargetTable":"CommunicationContact","Columns":{"CommunicationContactID":"WorkGroupID","ContactName":"WorkGroupName","CommunicationContactType":"%val.2%"}}]}],"Navigates":[{"PageId":"projectsWorkgroupMembers","Arg":"WorkGroupID","Column":"WorkGroupName"}]}],"Upserts":[{"TableMain":"WorkGroup","Title":"Данные рабочей группы","AjaxOnly":true}]},
                    {"Url":"/crm/{id}/workgroup","Id":"projectsWorkgroupMembers","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title":"{WorkGroupName} ({DateFormation})</h3></div>"}}},"Main":{"Table":"WorkGroup","Filter":{"Elements":[{"Column":"WorkGroupID","Url":"0"}]}},"Upserts":[{"TableMain":"WorkGroupMember","Title":"Данные участника группы","DefaultArg":"0","DefaultColumn":"WorkGroupID","AjaxOnly":true}],"Grids":[{"Table":"WorkGroupMember","ExcludedColumns":["WorkGroupID"],"ActionZone":[{"Text":"Добавить участника","IconCss":"icon-tasks","Color":"primary","Return":"projectsWorkgroupMembers_upsert_0"}],"Actions":[{"Text":"","IconCss":"icon-edit","Return":"projectsWorkgroupMembers_upsert_0"}],"HFilter":{"Elements":[{"Column":"WorkGroupID","Url":"0"}]}}]},
                    {"__Events__":"","Url":"/crm/events","Id":"eventsList","Grids":[{"Table":"Events","HFilter":"EventStatusID<4","ExcludedColumns":["WebPublic"],"Template":"Roster","TemplateConfig":{"Roster":{"RowFormat":{"Title":"@Nav(\"{EventName}\", \"eventView\")","UpRight":"{BeginDate}","Data":"{%Control.Actions%} {EventTypeID} | {ConferenceHallID}","DownRight":"{BasePrice} {CurrencyID} | {EventStatusID}"}}},"ActionZone":[{"Text":"Добавить мероприятие","IconCss":"icon-plus-sign","Return":"eventsList_upsert_0"}],"Actions":[{"Text":"","IconCss":"icon-pencil","Return":"eventsList_upsert_0"}]}],"Upserts":[{"TableMain":"Events"}]},
                    {"Url":"/crm/events/archive","Id":"eventsArchive","Grids":[{"Table":"Events","ExcludedColumns":["WebPublic","EventTitle","EventSubName"],"HFilter":{"Elements":[{"Column":"EventStatusID","Type":">=","Values":[4]}]},"Filters":{"Columns":{"Название":"like:EventName"}}}]},
                    {"Url":"/crm/events/clients","Id":"eventsClients","Grids":[{"Table":"Client","Name":"clientsLF","Join":{"PayerGroupID":["ClientSectorID","CityID"],"ClientManagerID":"StaffID"},"HFilter":"SegmentID=100","ExcludedColumns":["SegmentID","DiscountProgramID","ClientManagerID","DiscountRate"],"ActionZone":[{"Group":"","GroupIcon":"icon-th","Text":"Добавить клиента","IconCss":"icon-plus-sign","Return":"eventclientProfiles_upsert_0"},{"Group":"","ToExcel":true}],"Filters":{"Columns":{"Город":"PayerGroupID - PayerGroup.CityID","Название":"like:PayerGroupID - PayerGroup.PayerGroupName"}},"PagingSize":30,"IsSortOn":true,"SortBy":"PayerGroupID","Navigates":[{"PageId":"eventclientProfiles","Arg":"PayerGroupID","Column":"PayerGroupID","NavByColumn":true}]}]},
                    {"Url":"/crm/events/client/new","Id":"eventsClientCreate","Upserts":[{"TableMain":"PayerGroup","AjaxOnly":false,"Title":"Новый клиент","ToMain":["Client"],"ServerData":{"PayerGroupTypeID":"4"},"FkFilter":{"Client.ClientSourceID":{"Elements":[{"Column":"SegmentID","Values":[null,100]}]}},"Defaults":{"PayerGroup.ClientSectorID":"","PayerGroup.CityID":"2","Client.SegmentID":"100","Client.ClientManagerID":"01d68c5f-b4f9-4394-aaa8-35d4c9c8d36a"},"Hidden":["Client.SegmentID"],"Exclude":["PayerGroupTypeID","IsCurrent","DiscountRate"]}]},
                    {"Url":"/crm/{id}/eventclient","Id":"eventclientProfiles","Settings":{"Header":{"Columns":["PayerGroupName","PayerGroupTypeID","ClientSectorID","CityID","Commentary"]}},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | {PayerGroupTypeID} | {ClientSectorID} | {CityID}</span> <h3>{PayerGroupName}</h3>","Menu12":""}}},"Master":{"Table":"PayerGroup","HFilter":"PayerGroupID=%url.0%"},"Tabs":[{"Title":"Плательщики","Items":["eventclientProfiles_grid_0"]},{"Title":"Контакты","Items":["eventclientProfiles_grid_1"]},{"Title":"Заказы","Items":["eventclientProfiles_grid_2"]},{"Title":"Участники","Items":["eventclientProfiles_grid_3"]},{"Title":"Счета","Items":["eventclientProfiles_grid_4"]}],"Actions":[{"Text":"Данные клиента","Group":"","GroupIcon":"icon-th","IconCss":"icon-pencil","Controls":{"eventclientProfiles_upsert_0":{"ColVal":{"":"%0%"}}}}],"Upserts":[{"TableMain":"PayerGroup","Title":"Новый клиент","ToMain":["Client"],"ServerData":{"PayerGroupTypeID":"4"},"FkFilter":{"Client.ClientSourceID":{"Elements":[{"Column":"SegmentID","Values":[null,100]}]}},"Defaults":{"PayerGroup.ClientSectorID":"","PayerGroup.CityID":"2","Client.SegmentID":"100","Client.ClientManagerID":"%user%"},"Hidden":["Client.SegmentID"],"Redirect":{"PageId":"eventclientProfiles","Args":["%pk%"]},"Exclude":["PayerGroupTypeID","IsCurrent","DiscountRate"]},{"TableMain":"EventMembers","CustomColumns":[{"Name":"Payer","FK":"Payer"}],"Exclude":["ContactPersonID","RegisterDate","isPaid","isConfirmed","isTookPart","OrderDetailID"],"FkFilter":{"EventMembers.EventID":"EventStatusID<4","EventMembers.Payer":"PayerGroupID=%0%"},"ActionOnly":true,"ActionItems":[{"ActionParams":{"Method":"ContactsRegisterOnEvent"}}]}],"Grids":[{"Table":"Payer","ExcludedColumns":["PayerCEO_RodPadeg","PayerGroupID","isVATPayer"],"HFilter":"PayerGroupID=%0%","Paging":0,"ActionZone":[{"Text":"Добавить плательщика","IconCss":"icon-plus-sign","Controls":{"clientProfiles_upsert_0":{"ColVal":{"PayerGroupID":"%0%"}}}}],"Actions":[{"Text":"Изменить плательщика","Group":"","GroupIcon":"icon-list-ul","IconCss":"icon-edit-sign","Controls":{"clientProfiles_upsert_0":{"ColVal":{"PayerGroupID":"%0%"}}}}]},{"Table":"ContactPerson","HFilter":"PayerGroupID=%0%","VisibleColumns":["ShortName","ContactPosition"],"Navigates":[{"PageId":"contactpersonView","Arg":"ContactPersonID","Column":"ShortName"}],"ExcludedColumns":["PayerGroupID","ContactName","ContactSurname","ContactSecondName","isFemale","BirthDay","ContactDate","Commentary","isForContacts","isStaff","isUser","DocumentHolder.DocumentHolderID"],"JoinCustom":{"ContactPersonID":["DocumentHolder.DocumentHolderID"]},"Filters":{"Columns":{"Имя":"like:ContactName"}},"CustomColumns":[{"Name":"Phone","Sql":"'ee'"},{"Name":"Email","Sql":"'ee'"}],"ActionZone":[{"Text":"Новый контакт","IconCss":"icon-plus-sign","Controls":{"clientProfiles_upsert_2":{"Behavior":"Insert","TableMany":{"DefaultRows":[{"CPDetailsTypeID":"11"},{"CPDetailsTypeID":"22"}]},"ColVal":{"PayerGroupID":"%0%"}}}},{"Text":"Участники","IconCss":"icon-plus-sign","MultiRow":true,"Return":"eventclientProfiles_upsert_1"}],"SubGridShow":false,"CellFormat":{"Phone":"@SubGrid(0)","Email":"@SubGrid(1)"},"Grids":[{"Table":"ContactDetails","Join":{"CPDetailsTypeID":"CPDetailsClass"},"HFilter":"CPDetailsTypeID - CPDetailsClass=3","Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"{ContactDetailText}"}}}},{"Table":"ContactDetails","Join":{"CPDetailsTypeID":"CPDetailsClass"},"HFilter":"CPDetailsTypeID - CPDetailsClass=2","Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"{ContactDetailText}"}}}}],"Actions":[{"Text":"Изменить контакт","Group":"","GroupIcon":"icon-list-ul","IconCss":"icon-edit-sign","Controls":{"clientProfiles_upsert_2":{"ColVal":{"PayerGroupID":"%0%"}}}},{"Text":"Права доступа","Group":"","IconCss":"icon-group","Return":"clientProfiles_upsert_3"}]},{"Table":"Order","SortBy":"OrderDate","DefaultSortDesc":true,"HideTitle":true,"ExcludedColumns":["OrderCode","PayerGroupID","OrderName","OrderAutoCode","isSale","SegmentID"],"HFilter":{"Elements":[{"Column":"PayerGroupID","Url":"0"}]},"Navigates":[{"PageId":"orderView","Arg":"OrderID","Column":"OrderTitle"}]},{"Table":"EventMembers","ExcludedColumns":["OrderDetailID"],"HFilter":"ContactPersonID - PayerGroupID=%0%"},{"Table":"Bills","HFilter":"PayerID - Payer.PayerGroupID=%0%","PagingSize":20,"ColWidth":{"BillCode":"5%"},"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"VisibleColumns":["BillCode","BillName","PayerID","BillingDate","BillDeadLine","BillStatusID","CurrencyID"],"Navigates":[{"PageId":"billView","Arg":"BillID","Column":"BillName"}],"ActionZone":[{"Text":"Новый счет","IconCss":"icon-plus-sign","Return":"clientProfiles_upsert_5"}],"Actions":[{"Text":"Изменить счет","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"billView_upsert_1":{"Vars":{"@orderId":"%client.OrderID%"}}}},{"Text":"Выставить счет","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["0"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.1%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.1%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Аннулирование","Group":"","IconCss":"icon-remove-sign","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.255%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.255%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Частичная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"0","TargetID":"%client%","PayStatus":"2"}}}},{"Text":"Полная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"1","TargetID":"%client%"}}}},{"Text":"Удалить счет","Group":"","IconCss":"icon-remove","Filter":{"Elements":[{"Column":"BillStatusID","Values":[0]}]},"ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"Bills","TargetTable":"Bills","DeleteBy":"BillID"}]}],"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}]}]},
                    {"Url":"/crm/events/{id}/event","Id":"eventView","Settings":{"Header":{"Columns":"*"}},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>@Actions() | Дата: {BeginDate} | Статус: {EventStatusID}</span> <h3>{EventName}</h3>","Menu12":"Тип: {EventTypeID} | Место проведения: {ConferenceHallID}"}}},"Master":{"Table":"Events","HFilter":"EventID=%0%"},"Menus":{"0":["event","mainmenu"]},"Upserts":[{"TableMain":"EventMembers","IsHide":true,"DefaultColumn":"EventID","DefaultArg":"0","Defaults":{"EventMembers.ContactPersonID":""},"Exclude":["isPaid","isConfirmed","isTookPart","OrderDetailID"]},{"TableMain":"EventMembers","Exclude":["EventID"]}],"Tabs":[{"Title":"Участники","Items":["eventView_grid_0"]},{"Title":"Детали заказов","Items":["eventView_grid_1"]}],"Actions":[{"Text":"Изменить","Group":"","GroupIcon":"icon-th","IconCss":"icon-pencil","Controls":{"eventsList_upsert_0":{"ColVal":{"":"%0%"}}}}],"Grids":[{"Table":"EventMembers","EditableColumns":["RegisterDate"],"ExcludedColumns":["EventID"],"HFilter":"EventID=%0%","Actions":[{"Text":"Edit","IconCss":"icon-edit","Return":"eventsDetail_upsert_1"}]},{"Table":"BillDetail","ExcludedColumns":["OrderDetailID"],"HFilter":"OrderDetailID - OrderDetail.ObjectID=%0%"}]},
                    {"Url":"/crm/events/orders","Id":"eventsOrders","Grids":[{"Table":"Order","HFilter":"SegmentID=100","Actions":[{"Text":"","IconCss":"icon-edit-sign","Return":"orderNew_upsert_0"},{"Text":"","IconCss":"icon-tasks","Return":["ordersLastBillProj_grid_0","ordersLastBillProj_grid_1"]}],"ActionZone":[{"Text":"Создать заказ","IconCss":"icon-plus-sign","Return":"orderNew_upsert_0"}],"SortBy":"OrderDate","DefaultSortDesc":true,"ExcludedColumns":["OrderCode","OrderName","OrderAutoCode","isSale","SegmentID"],"PagingSize":"30","Navigates":[{"PageId":"orderView","Arg":"OrderID","Column":"OrderTitle"},{"PageId":"eventclientProfiles","Arg":"PayerGroupID","Column":"PayerGroupID"}]}]},
                    {"Url":"/crm/events/bills","Id":"eventsBills","Grids":[{"Table":"Bills","PagingSize":20,"ColWidth":{"BillCode":"5%"},"Join":{"CurrencyID":"CurrencySign"},"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"ExcludedColumns":["Currency.CurrencySign","OrderID","BeneficiaryID","VATRateID","CurrencyID","LanguageID"],"CellFormat":{"BillName":"@Nav(\"{BillName}\",  \"billView\", \"BillID\")","BillDetailSum":"{BillDetailSum} {CurrencyID - CurrencySign}"},"EditableColumns":["BillCode"],"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"HFilter":"BillStatusID<10 and OrderID - SegmentID=100","Actions":[{"Text":"Изменить счет","Group":"","GroupIcon":"icon-list-ul ","IconCss":"icon-pencil","Controls":{"billView_upsert_1":{"Vars":{"@orderId":"%client.OrderID%"}}}},{"Text":"Выставить счет","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["0"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.1%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.1%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Аннулирование","Group":"","IconCss":"icon-remove-sign","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.255%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.255%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"Частичная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"0","TargetID":"%client%","PayStatus":"2"}}}},{"Text":"Полная оплата","Group":"","IconCss":"icon-usd","Filter":{"Elements":[{"Column":"BillStatusID","Values":[1,2,5]}]},"Controls":{"billView_upsert_2":{"Behavior":"Insert","ColVal":{"IsFullPaid":"1","TargetID":"%client%"}}}},{"Text":"Удалить счет","Group":"","IconCss":"icon-remove","Filter":{"Elements":[{"Column":"BillStatusID","Values":[0]}]},"ServerSide":true,"Items":[{"ActionType":"Delete","SourceTable":"Bills","TargetTable":"Bills","DeleteBy":"BillID"}]},{"Text":"","IconCss":"icon-print","Navigates":{"PageId":"billPrint","Arg":"BillID","Column":"BillName"}}],"Filters":{"Columns":{"Код":"like:BillCode","Название":"like:BillName"},"Beetwens":{"Дата":"BillingDate"}}}]},
                    {"__Admin__":"","Url":"/admin/products","Id":"productTree","TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Практики</h3>"}}},"HierarchicalTreeViews":[{"Table":"Practice","Data":{"icon":"icon-book"},"RowCount":0,"Actions":[{"Text":"Добавить решение","Group":"","IconCss":"icon-plus-sign","Controls":{"productTree_upsert_1":{"ColVal":{"PracticeID":"%client%"}}}},{"Text":"Редактировать практику","Group":"","IconCss":"icon-pencil","Return":"productTree_upsert_0"}],"Items":[{"Table":"Solution","RowCount":0,"Data":{"icon":"icon-briefcase"},"Actions":[{"Text":"Добавить продукт","Group":"","IconCss":"icon-plus-sign","Controls":{"productTree_upsert_2":{"ColVal":{"SolutionID":"%client%"}}}},{"Text":"Редактировать решение","Group":"","IconCss":"icon-pencil","Return":"productTree_upsert_1"}],"Items":[{"Table":"SolutionToProduct","RowCount":0,"Data":{"icon":"icon-file-text"},"Actions":[{"Text":"Редактировать продукт","Group":"","IconCss":"icon-pencil","Return":"productTree_upsert_2"}]}]}]}],"Upserts":[{"TableMain":"Practice","Title":"Данные практики","Configuration":{"ColVal":{"PracticeID":"%0%"}}},{"TableMain":"Solution","Title":"Данные решения"},{"TableMain":"SolutionToProduct","Title":"Данные продукта","FromMain":["Product"],"Hidden":["SolutionID","ProductID"]}]},
                    {"Url":"/admin/publications","Id":"publications","Grids":[{"Table":"News","IsSortOn":true,"SortBy":"NewsDate","DefaultSortDesc":true,"PagingSize":30,"Filters":{"Columns":{"Источник":"NewsMakerID"}},"VisibleColumns":["NewsHeadLine","NewsTypeID","NewsDate","NewsMakerID"],"Actions":[{"Text":"","IconCss":"icon-pencil","Return":"publications_upsert_0"}],"ActionZone":[{"Text":"Добавить публикацию","IconCss":"icon-plus-sign","Return":"publications_upsert_0"}]}],"Upserts":[{"TableMain":"News","Title":"Данные публикации","Exclude":["PageOpenCount","UrlLatin"],"TablesMany":[{"Table":"NewsToTag","RowView":"MultiSelect","Name":"Теги","Position":"after.News.NewsMakerID"}]}]},
                    {"__ClientOrder__":"","Url":"/client/orders","Id":"clientorders","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Order","HFilter":"SegmentID=1 and OrderStageID<6 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","PartBy":"OrderStageID - OrderStageID","PartByDisplay":"OrderStageID","SortBy":"OrderDate","PagingSize":"30","Actions":[{"Text":"","IconCss":"icon-tasks","Return":["ordersLastBillProj_grid_0","ordersLastBillProj_grid_1"]}],"ExcludedColumns":["PayerGroupID","OrderCode","OrderName","OrderAutoCode","isSale","SegmentID"],"Filters":{"Columns":{"Название":"like:OrderName","Ход выполнения":"OrderStageID","Статус оплаты":"OrderPaymentStatusID"},"Beetwens":{"Дата заказа":"OrderDate"}},"Navigates":[{"PageId":"clientorderView","Arg":"OrderID","Column":"OrderTitle"}]}]},
                    {"Url":"/client/orders/closed","Id":"clientclosedorders","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Order","HFilter":"SegmentID=1 and OrderStageID>5 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","PartBy":"OrderStageID - OrderStageID","PartByDisplay":"OrderStageID","SortBy":"OrderDate","PagingSize":"30","Actions":[{"Text":"","IconCss":"icon-tasks","Return":["ordersLastBillProj_grid_0","ordersLastBillProj_grid_1"]}],"ExcludedColumns":["PayerGroupID","OrderCode","OrderName","OrderAutoCode","isSale","SegmentID"],"Filters":{"Columns":{"Название":"like:OrderName","Ход выполнения":"OrderStageID","Статус оплаты":"OrderPaymentStatusID"},"Beetwens":{"Дата заказа":"OrderDate"}},"Navigates":[{"PageId":"clientorderView","Arg":"OrderID","Column":"OrderTitle"}]}]},
                    {"Url":"/client/{id}/order","Id":"clientorderView","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>Стадия: {OrderStageID} | Статус: {OrderPaymentStatusID}</span><h3>{OrderName}</h3>","Menu12":"Заказ №{OrderAutoCode} от {OrderDate}"}}},"Master":{"Table":"Order","HFilter":"OrderID=%0%"},"Tabs":[{"Title":"Детали заказа","Items":["clientorderView_grid_0"]},{"Title":"Счета на оплату","Items":["clientorderView_grid_1"]}],"Grids":[{"Table":"OrderDetail","JoinCustom":{"OrderDetailID":["Project.StatusID","Project.ProjectID","Project.RegisterDate"]},"HFilter":"OrderID=%url.0%","ExcludedColumns":["Amount","Project.ProjectID","OrderDetailClass","OrderID","ObjectID"],"CellFormat":{"OrderDetailName":"@Nav(\"{OrderDetailName}\",  \"clientprojectView\", \"OrderDetailID - Project.ProjectID\")"}},{"Table":"Bills","VisibleColumns":["BillCode","BillName","PayerID","BillingDate","BillDeadLine","BillStatusID"],"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"CellFormat":{"BillDetailSum":"{BillDetailSum} {CurrencyID}"},"HFilter":{"Elements":[{"Column":"OrderID","Url":"0"}]},"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"Navigates":[{"PageId":"clientbillView","Arg":"BillID","Column":"BillName"}],"Actions":[{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]}]}]},
                    {"Url":"/client/inquiry","Id":"clientinquiryList","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Inquiry","HFilter":"RequestorID=%user.ContactPersonID%","PartByDisplay":"InquiryStatusID","PartBy":"InquiryStatusID - InquiryStatus.InquiryStatusID","Filters":{"Columns":{"Название":"like:InquiryName","Тип":"InquiryTypeID","Статус":"InquiryStatusID"}},"Columns":{"Orders":{"InquiryDate":1,"InquiryName":2,"RequestorID":3,"InquiryTypeID":4}},"PagingSize":30,"IsSortOn":true,"SortBy":"InquiryDate","ExcludedColumns":["InquiryText","RequestorID"],"Navigates":[{"PageId":"clientinquiryView","Arg":"InquiryID","Column":"InquiryName"}]}]},
                    {"__ClientProject__":"","Url":"/client/projectgroups","Id":"clientprojectGroups","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Иерархия проектов</h3>"}}},"Master":{"Table":"PayerGroup","HFilter":"PayerGroupID=%user.ContactPersonID - PayerGroupID%"},"HierarchicalTreeViews":[{"Table":"ProjectGroup","SelfRelation":true,"HFilter":"PayerGroupID=%user.ContactPersonID - PayerGroupID%","Data":{"icon":"icon-folder-close-alt"},"RowCount":0,"Items":[{"Table":"Project","RowCount":0,"AllowParentNull":true,"HFilter":"PayerGroupID=%user.ContactPersonID - PayerGroupID%","Data":{"icon":"icon-tasks"},"Nav":{"PageId":"clientprojectView"}}]}]},
                    {"Url":"/client/projects","Id":"clientprojects","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Текущие проекты</h3>"}}},"Tabs":[{"Title":"В работе","Items":["clientprojects_grid_0"]},{"Title":"Ожидание","Items":["clientprojects_grid_1"]},{"Title":"Приостановлены","Items":["clientprojects_grid_2"]}],"Grids":[{"Table":"Project","HFilter":"StatusID=2 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","PartByDisplay":"ProductID - Product.ProjectTypeID","PartBy":"ProductID - Product.ProjectTypeID - ProjectType.SolutionOrder","PagingSize":50,"ColWidth":{"ProjectName":"50%"},"VisibleColumns":["ProjectName","RegisterDate","StatusID","PayerGroupID"],"Filters":{"Columns":{"Название":"like:ProjectName","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"PayerGroupID":3,"RegisterDate":4}},"Navigates":[{"PageId":"clientprojectView","Arg":"ProjectID","Column":"ProjectName"}]},{"Table":"Project","HFilter":"StatusID<2 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","PartByDisplay":"ProductID - Product.ProjectTypeID","PartBy":"ProductID - Product.ProjectTypeID - ProjectType.SolutionOrder","Join":{"ProjectManagerStaffID":"StaffID"},"PagingSize":50,"ColWidth":{"ProjectName":"50%"},"VisibleColumns":["ProjectName","RegisterDate","StatusID","PayerGroupID"],"Filters":{"Columns":{"Название":"like:ProjectName","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"PayerGroupID":3,"RegisterDate":4}},"Navigates":[{"PageId":"clientprojectView","Arg":"ProjectID","Column":"ProjectName"}]},{"Table":"Project","HFilter":"StatusID=5 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","PartByDisplay":"ProductID - Product.ProjectTypeID","PartBy":"ProductID - Product.ProjectTypeID - ProjectType.SolutionOrder","Join":{"ProjectManagerStaffID":"StaffID"},"PagingSize":50,"ColWidth":{"ProjectName":"50%"},"VisibleColumns":["ProjectName","RegisterDate","StatusID","PayerGroupID"],"Filters":{"Columns":{"Название":"like:ProjectName","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"PayerGroupID":3,"RegisterDate":4}},"Navigates":[{"PageId":"clientprojectView","Arg":"ProjectID","Column":"ProjectName"}]}]},
                    {"Url":"/client/projects/closed","Id":"clientclosedprojects","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Закрытые проекты</h3>"}}},"Tabs":[{"Title":"Выполнены","Items":["clientclosedprojects_grid_0"]},{"Title":"Аннулированы","Items":["clientclosedprojects_grid_1"]}],"Grids":[{"Table":"Project","HFilter":"StatusID=3 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","SortBy":"RegisterDate","PagingSize":50,"ColWidth":{"ProjectName":"50%"},"VisibleColumns":["ProjectName","RegisterDate","StatusID"],"Filters":{"Columns":{"Название":"like:ProjectName","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"RegisterDate":4}},"Navigates":[{"PageId":"clientprojectView","Arg":"ProjectID","Column":"ProjectName"}]},{"Table":"Project","HFilter":"StatusID>5 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","PartByDisplay":"ProductID - Product.ProjectTypeID","PartBy":"ProductID - Product.ProjectTypeID - ProjectType.SolutionOrder","Join":{"ProjectManagerStaffID":"StaffID"},"PagingSize":50,"ColWidth":{"ProjectName":"50%"},"VisibleColumns":["ProjectName","RegisterDate","StatusID","PayerGroupID"],"Filters":{"Columns":{"Название":"like:ProjectName","Тип проекта":"ProductID;Product.ProjectTypeID"}},"Columns":{"Orders":{"PayerGroupID":3,"RegisterDate":4}},"Navigates":[{"PageId":"clientprojectView","Arg":"ProjectID","Column":"ProjectName"}]}]},
                    {"Url":"/client/{id}/project","Id":"clientprojectView","Menus":{"1":["clientmenu"]},"Settings":{"Header":{"Columns":"*"}},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>Открыт: {RegisterDate} | Статус: {StatusID}</span> <h3>{ProjectName}</h3>","Menu12":"Менеджер: {ProjectManagerStaffID} | @Wrap(Nav(\"{ProjectID - OrderDetail.OrderID}\", \"clientorderView\", \"%Main.ProjectID - OrderDetail.OrderID%\"), \"Заказ:\", \"\")"}}},"Master":{"Table":"Project","HFilter":"ProjectID=%0%","JoinCustom":{"ProjectID":["OrderDetail.OrderID"]},"CustomColumns":[{"Name":"IsFinishReady","DataType":"int","Sql":"case when (select count(*) from ProjectFlow pf where pf.ProjectID = [Project].[ProjectID]) > 0 and not exists(select ProjectFlowID from ProjectFlow pf where pf.ProjectID = [Project].[ProjectID] and FinishDate is null) then 1 else 0 end"}]},"Tabs":[{"Title":"Этапы проекта","Items":["clientprojectView_grid_0"]},{"Title":"Документы","Items":["clientprojectView_grid_1"]}],"Grids":[{"Table":"ProjectFlow","HFilter":"ProjectID=%0%","SortBy":"StartDate","ExcludedColumns":["ProjectID"]},{"Table":"Document","HFilter":"FolderID=%main.DefaultFolderID% and PathGuid=%main.PayerGroupID%","SortBy":"DocumentName","PagingSize":75,"VisibleColumns":["DocumentName","CreateDate","FileSize"]}]},
                    {"Url":"/client/companies","Id":"clientoffshoreList","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"OffshoreCompany","HFilter":"OwnerPayerGroupID=%user.ContactPersonID - PayerGroupID%","Filters":{"Columns":{"Наименование":"like:OffshoreCompanyName","Номер":"like:CompanyNumber","Статус":"OffshoreCompanyStatusID","Провайдер":{"link":"CorporateProviderID","FkFilter":"PayerGroupTypeID=7"}},"Beetwens":{"Продление":"NextAnnualPaymentDate"}},"PagingSize":30,"IsSortOn":true,"SortBy":"OffshoreCompanyName","ExcludedColumns":["IsShelfCompany","CorporateProviderID","NomineeServiceProviderID","OwnerPayerGroupID"],"Navigates":[{"PageId":"clientoffshoreView","Arg":"OffshoreCompanyID","Column":"OffshoreCompanyName"}]}]},
                    {"Url":"/client/{id}/company","Id":"clientoffshoreView","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>Дата основания - {IncorporationDate}  |  №{CompanyNumber} | {OffshoreCompanyStatusID}</span> <h3>@Actions() {OffshoreCompanyName}</h3>","Menu12":"{OffshoreJurisdictionID} | {AddressID}"}}},"Master":{"Table":"OffshoreCompany","HFilter":{"Elements":[{"Column":"OffshoreCompanyID","Url":"0"}]}},"Tabs":[{"Title":"Структура","Items":["clientoffshoreView_grid_0"]},{"Title":"Банковские счета","Items":["clientoffshoreView_grid_1"]},{"Title":"Содержание","Items":["clientoffshoreView_grid_3"]},{"Title":"Отчётность","Items":["clientoffshoreView_grid_4"]},{"Title":"Изменения","Items":["clientoffshoreView_grid_5"]},{"Title":"Проекты","Items":["clientoffshoreView_grid_2"]}],"Grids":[{"Table":"OffshoreCompanyManagement","HFilter":"OffshoreCompanyID=%0%","ColWidth":{"OffshoreCompanyManagementPositionID":"50%"},"Columns":{"Orders":{"OffshoreCompanyManagementPositionID":1}},"ExcludedColumns":["OffshoreCompanyID"]},{"Table":"OffshoreCompanyBankAccount","HFilter":"OffshoreCompanyID=%0%","ColWidth":{"BankPayerGroupID":"50%"},"ExcludedColumns":["OffshoreCompanyID"]},{"Table":"OffshoreCompanyProjects","Name":"OffshoreCompanyProjects_offshoreView","ExcludedColumns":["OffshoreCompanyID"],"Navigates":[{"PageId":"clientprojectView","Arg":"ProjectID","Column":"ProjectID","NavByColumn":true}],"Join":{"ProjectID":["StatusID","RegisterDate"]},"ColWidth":{"ProjectID":"50%"},"HFilter":"OffshoreCompanyID=%0%","SortBy":"ProjectID - RegisterDate"},{"Table":"OffshoreCompanyLog","ExcludedColumns":["OffshoreCompanyID"],"HFilter":"OffshoreCompanyID=%0% and LogTypeID - OffshoreCompanyLogType.LogClass=1"},{"Table":"OffshoreCompanyLog","ExcludedColumns":["OffshoreCompanyID"],"HFilter":"OffshoreCompanyID=%0% and LogTypeID - OffshoreCompanyLogType.LogClass=2"},{"Table":"OffshoreCompanyLog","ExcludedColumns":["OffshoreCompanyID"],"HFilter":"OffshoreCompanyID=%0% and LogTypeID - OffshoreCompanyLogType.LogClass=3"}]},
                    {"__ClientBill__":"","Url":"/client/{id}/bill","Id":"clientbillView","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>Дата счета - {BillingDate} | Статус - {BillStatusID}</span> <h3>Счёт №{BillCode} {BillName}</h3>"}}},"Master":{"Table":"Bills","HFilter":{"Elements":[{"Column":"BillID","Url":"0"}]}},"Tabs":[{"Title":"Позиции","Items":["clientbillView_grid_0"]},{"Title":"Оплаты","Items":["clientbillView_grid_1"]},{"Title":"Хронология","Items":["clientbillView_grid_2"]}],"Actions":[{"Text":"Уведомление оплаты","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%","":"%0%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"%0%","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]}],"Grids":[{"Table":"BillDetail","HFilter":{"Elements":[{"Column":"BillID","Url":"0"}]},"ExcludedColumns":["BillID","OrderDetailID"],"ColWidth":{"Price":"7%","Quantity":"4%","Amount":"7%"}},{"Table":"BillPayments","HFilter":{"Elements":[{"Column":"BillID","Url":"0"}]},"Columns":{"Orders":{"PaymentDate":2,"CashFlowID":11,"Sum":10}},"CellFormat":{"Sum":"{Sum} {CashFlowID - CashAccountID - CurrencyID - CurrencySign}"},"Join":{"CashFlowID":["CashAccountID - CurrencyID - CurrencySign","PaymentDate"]},"ExcludedColumns":["BillID","IsFullPaid"]},{"Table":"BillHistory","HFilter":{"Elements":[{"Column":"BillID","Url":"0"}]},"ExcludedColumns":["BillID"],"SortBy":"BillHistoryDate"}]},
                    {"Url":"/client/bills","Id":"clientpendingBills","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Bills","HFilter":"BillStatusID<10 and OrderID - SegmentID=1 and OrderID - PayerGroupID=%user.ContactPersonID - PayerGroupID%","PartBy":"BillStatusID","PagingSize":20,"ColWidth":{"BillCode":"5%"},"CellFormat":{"BillName":"@Nav(\"{BillName}\",  \"clientbillView\", \"BillID\")","BillDetailSum":"{BillDetailSum} {CurrencyID - CurrencySign}"},"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"VisibleColumns":["BillCode","BillName","PayerID","BillingDate","BillDeadLine","BillStatusID"],"ExcludedColumns":["OrderID","BillDiscount","BeneficiaryID","VATRateID","CurrencyID","LanguageID"],"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"Actions":[{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"","IconCss":"icon-print","Navigates":{"PageId":"clientbillPrint","Arg":"BillID","Column":"BillName"}}],"Filters":{"Columns":{"Код":"like:BillCode","Название":"like:BillName"},"Beetwens":{"Дата":"BillingDate"}}}]},
                    {"Url":"/client/paidbills","Id":"clientpaidBills","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Bills","HFilter":"BillStatusID=10 and OrderID - SegmentID=1 and OrderID - PayerGroupID=%user.ContactPersonID - PayerGroupID%","PagingSize":20,"ColWidth":{"BillCode":"5%"},"CellFormat":{"BillName":"@Nav(\"{BillName}\",  \"clientbillView\", \"BillID\")","BillDetailSum":"{BillDetailSum} {CurrencyID - CurrencySign}"},"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"VisibleColumns":["BillCode","BillName","PayerID","BillingDate","BillDeadLine","BillStatusID"],"ExcludedColumns":["OrderID","BillDiscount","BeneficiaryID","VATRateID","CurrencyID","LanguageID"],"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"Actions":[{"Text":"Уведомление оплаты","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["1"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.2%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.2%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"","IconCss":"icon-print","Navigates":{"PageId":"clientbillPrint","Arg":"BillID","Column":"BillName"}}],"Filters":{"Columns":{"Код":"like:BillCode","Название":"like:BillName"},"Beetwens":{"Дата":"BillingDate"}}}]},
                    {"Url":"/client/{id}/printbill","Id":"clientbillPrint","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"All":"<div class='col-md-12' style='max-width: 1000px; font-family: Tahoma'><div class='row'><div class='col-md-6'><span class='billtext'>Supplier: </span><br><h5 class='billtext bold'>{BeneficiaryID}</h5><span class='billtext'>@Grid(1)</span> <br></div> <div class='col-md-6'><span class='billtext'>Payer: </span><br> <h5 class='billtext bold'>{PayerID}</h5><span class='billtext bold'>@Grid(2)</span></div></div><br><span class='billtext bold'>Issue date: {BillingDate}</span><h4 style='text-align:center;letter-spacing: -1;font-size: 20px;'>PROFORMA-INVOICE №{BillCode}</h4> <br> @Grid(0) <span style='font-weight: bold; margin-left: 10px'> TOTAL AMOUNT - {BillDetailSum} {%main.CurrencyID - CurrencySign%}</span> </div>"}}},"Master":{"Table":"Bills","HFilter":"BillID=%0%","Join":{"CurrencyID":"CurrencySign","PayerID":"PayerCEO","BeneficiaryID":"PayerCEO"},"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}]},"Grids":[{"Table":"BillDetail","Name":"billPrintDetail","Language":"%main.LanguageID%","HideTitle":true,"HFilter":"BillID=%0%","ExcludedColumns":["BillID","OrderDetailID"],"ColWidth":{"Price":"7%","Quantity":"4%","Amount":"7%"}},{"Table":"PayerDetails","HFilter":"PayerID=%main.BeneficiaryID%","HideTitle":true,"Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"@Br(\"{PayerDetailText}\")"}}}},{"Table":"PayerDetails","HFilter":"PayerID=%main.PayerID%","HideTitle":true,"Template":"Empty","Paging":0,"TemplateConfig":{"Empty":{"RowFormat":{"Title":"@Br(\"{PayerDetailText}\")"}}}}]},
                    {"Url":"/client/bills/payments","Id":"clientbillpayments","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"BillPayments","Name":"payments","SortBy":"CashFlowID - PaymentDate","PagingSize":30,"Columns":{"Orders":{"PaymentDate":1,"CashAccountID":2,"Sum":6,"CurrencyID":7}},"ExcludedColumns":["CashFlowID","BillID","IsFullPaid"],"HFilter":"BillID - OrderID - SegmentID=1 and BillID - OrderID - PayerGroupID=%user.ContactPersonID - PayerGroupID%","Filters":{"Columns":{"Сумма":"like:Sum","Детали":"like:PaymentComment"},"Beetwens":{"Дата":"PaymentDate"}},"Join":{"BillID":["BillName"],"CashFlowID":["PaymentDate","CashAccountID - CurrencyID"]}}]},
                    {"__Events__":"","Url":"/client/events","Id":"clienteventsList","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Events","HFilter":"EventStatusID<4","ExcludedColumns":["WebPublic"],"Template":"Roster","TemplateConfig":{"Roster":{"RowFormat":{"Title":"@Nav(\"{EventName}\", \"clienteventView\")","UpRight":"{BeginDate}","Data":"{EventTypeID} | {ConferenceHallID}","DownRight":"{BasePrice} {CurrencyID} | {EventStatusID}"}}}}]},
                    {"Url":"/client/{id}/event","Id":"clienteventView","Settings":{"Header":{"Columns":"*"}},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<span class='right'>Дата: {BeginDate} | Статус: {EventStatusID}</span> <h3>{EventName}</h3>","Menu12":"Тип: {EventTypeID} | Место проведения: {ConferenceHallID}"}}},"Master":{"Table":"Events","HFilter":"EventID=%0%"},"Menus":{"0":["clientmenu"]},"Tabs":[{"Title":"Участники","Items":["clienteventView_grid_0"]},{"Title":"Детали заказа","Items":["clienteventView_grid_1"]}],"Grids":[{"Table":"EventMembers","ExcludedColumns":["EventID"],"HFilter":"EventID=%0%"},{"Table":"BillDetail","ExcludedColumns":["OrderDetailID"],"HFilter":"OrderDetailID - OrderDetail.ObjectID=%0%"}]},
                    {"Url":"/client/events/orders","Id":"clienteventsOrders","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Order","HFilter":"SegmentID=100 and PayerGroupID=%user.ContactPersonID - PayerGroupID%","SortBy":"OrderDate","DefaultSortDesc":true,"ExcludedColumns":["OrderCode","OrderName","OrderAutoCode","isSale","SegmentID"],"PagingSize":"30","Navigates":[{"PageId":"orderView","Arg":"OrderID","Column":"OrderTitle"}]}]},
                    {"Url":"/client/events/bills","Id":"clienteventsBills","Menus":{"1":["clientmenu"]},"Grids":[{"Table":"Bills","PagingSize":20,"ColWidth":{"BillCode":"5%"},"Join":{"CurrencyID":"CurrencySign"},"Columns":{"Orders":{"BillCode":1,"BillingDate":2,"BillName":3,"PayerID":4,"CurrencyID":9,"BillStatusID":10,"BillDeadLine":11}},"ExcludedColumns":["Currency.CurrencySign","OrderID","BeneficiaryID","VATRateID","CurrencyID","LanguageID"],"CellFormat":{"BillName":"@Nav(\"{BillName}\",  \"billView\", \"BillID\")","BillDetailSum":"{BillDetailSum} {CurrencyID - CurrencySign}"},"FkAgs":[{"Table":"BillDetail","From":"BillID","Exp":"Price*Quantity","Name":"Sum","Func":"SUM"}],"HFilter":"OrderID - SegmentID=100 and OrderID - PayerGroupID=%user.ContactPersonID - PayerGroupID%","Actions":[{"Text":"Выставить счет","Group":"","IconCss":"icon-envelope","Filter":{"Elements":[{"Column":"BillStatusID","Values":["0"]}]},"ServerSide":true,"Items":[{"ActionType":"Update","SourceTable":"Bills","TargetTable":"Bills","Columns":{"BillStatusID":"%val.1%"}},{"ActionType":"Insert","SourceTable":"Bills","TargetTable":"BillHistory","Columns":{"BillID":"BillID","BillStatusID":"%val.1%","BillHistoryDate":"%userdatetime%"}}]},{"Text":"","IconCss":"icon-print","Navigates":{"PageId":"billPrint","Arg":"BillID","Column":"BillName"}}],"Filters":{"Columns":{"Код":"like:BillCode","Название":"like:BillName"},"Beetwens":{"Дата":"BillingDate"}}}]},
                    {"Url":"/client/documents","Id":"clientdocsTree","Menus":{"1":["clientmenu"]},"TemplateConfig":{"PageTemplate":{"LineFormat":{"Title12":"<h3>Документы</h3>"}}},"Master":{"Table":"PayerGroup","HFilter":"PayerGroupID=%user.ContactPersonID - PayerGroupID%"},"HierarchicalTreeViews":[{"Table":"DocumentFolder","SelfRelation":true,"HFilter":"PayerGroupID=%user.ContactPersonID - PayerGroupID%","Data":{"icon":"icon-folder-close-alt"},"RowCount":0,"Items":[{"Table":"Document","RowCount":0,"AllowParentNull":true,"HFilter":"PathGuid=%user.ContactPersonID - PayerGroupID%","Data":{"icon":"icon-file-text-alt"}}]}]}
                ]
            };

            $(function () { FormatAndShow(json, $('.json-collapse'), true); });
    </script>

    <style>
        .json-collapse .ln {
            margin-right: 10px;
        }

        .json-collapse .scr,
        .json-collapse textarea {
            line-height: 1.37;
            height: 600px;
        }

        .json-collapse .scr {
            padding-top: 2px;
            font-size: 13px;
            float: left;
            overflow: hidden;
            display: inline-block;
        }

        .json-collapse textarea {
            resize: none;
            width: 95%;
        }
    </style>
</head>
<body>

    <div class="json-collapse"><div class="scr"></div><textarea wrap="off"></textarea></div>

</body>
</html>